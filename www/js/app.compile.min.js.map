{"version":3,"sources":["../../app/app.js","../../app/app.config.js","../../app/app.route.js","../../app/directives/navbar.js","../../app/services/spinalCore.js","../../app/services/spinalModelDictionary.js","../../app/services/goldenLayoutService.js","../../app/services/authService.js","../../app/controllers/mainCtrl.js","../../app/controllers/navbarCtrl.js","../../app/controllers/forgeViewerCtrl.js","../../app/controllers/loginCtrl.js","../../app/run/plugin-annotation.js"],"names":[],"mappings":"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","file":"app.compile.min.js","sourcesContent":["angular.module('app.route', ['ngRoute']);\nangular.module('app.services', []);\nangular.module('app.directives', []);\nangular.module('app.controllers', []);\nangular.module('app.spinalcom', ['settings', 'ngMaterial']);\nangular.module('app.spinalforge.plugin', []);\n\nangular.module('SpinalApp', ['ngAnimate', 'ngMaterial', 'app.directives', 'app.route',\n    'app.services', 'app.controllers', 'ngMdIcons', 'settings', 'app.spinalcom', 'app.spinalforge.plugin',\n  ])\n  .run(['$rootScope', '$location', 'authService', function ($rootScope, $location, authService) {\n    let user = authService.get_user();\n    $rootScope.$on('$routeChangeStart', function (event, next, current) {\n      if (next.$$route.authenticate) {\n        if (!authService.is_Connected()) {\n          authService.login(user.username, user.password)\n            .then(function () {},\n              function () {\n                $location.path('/login');\n              });\n        }\n      }\n    });\n  }])\n\n\n  .config([\"$mdThemingProvider\", function ($mdThemingProvider) {\n    $mdThemingProvider.theme('altTheme')\n      .primaryPalette('grey', {\n        'default': '200'\n      })\n      .accentPalette('grey', {\n        'default': '700'\n      })\n      .dark();\n    $mdThemingProvider.theme('default')\n      .dark();\n\n    $mdThemingProvider.setDefaultTheme('altTheme');\n    $mdThemingProvider.alwaysWatchTheme(true);\n  }]).run([\"$templateCache\", \"$http\", function ($templateCache, $http) {\n    let load_template = (uri, name) => {\n      $http.get(uri).then((response) => {\n        $templateCache.put(name, response.data);\n      }, (errorResponse) => {\n        console.log('Cannot load the file ' + uri);\n      });\n    };\n    let toload = [{\n      uri: 'app/templates/forgeviewer.html',\n      name: 'forgeviewer.html'\n    }];\n    for (var i = 0; i < toload.length; i++) {\n      load_template(toload[i].uri, toload[i].name);\n    }\n\n    // $templateCache.put('templateId.html', 'This is the content of the template');\n  }]);","angular.module('settings', [])\n  .constant('config', {\n    main_path: '/',\n    spinalhub_url: '127.0.0.1',\n    spinalhub_port: '8888',\n    spinalhub_user: '168',\n  });","angular.module('app.route')\n  .config([\"$routeProvider\", \"$locationProvider\",\n    function ($routeProvider, $locationProvider) {\n      $routeProvider\n\n        .when(\"/viewer/:filepath\", {\n          templateUrl: \"app/templates/main.html\",\n          authenticate: true,\n          controller: 'mainCtrl'\n        })\n        .when(\"/login\", {\n          templateUrl: \"app/templates/login.html\",\n          authenticate: false,\n          controller: 'loginCtrl'\n        })\n        .when('/404', {\n          authenticate: false,\n          controller: ['$location', function ($location) {\n            $location.replace('/drive/');\n          }]\n        }).otherwise({\n          redirectTo: '/404'\n        });\n\n      // .otherwise({\n      //   redirectTo: '/viewer'\n      // });\n    }\n  ]);","angular.module('app.directives')\n  .directive(\"navbar\", [\n    function () {\n      return {\n        restrict: 'E',\n        templateUrl: 'app/templates/navbar.html',\n        controller: 'navbarCtrl',\n      };\n    }\n  ])\n  .directive(\"menuGlayout\", ['goldenLayoutService', '$timeout',\n    function (goldenLayoutService, $timeout) {\n      return {\n        restrict: 'E',\n        scope: {\n          layoutInfo: '=info'\n        },\n        replace: true,\n        template: '<li ng-repeat=\\\"layout in layoutInfo\\\"  id=\\\"{{layout.id}}\\\"><a >{{layout.name}}</a></li>',\n        link: (scope, element, attrs) => {\n          goldenLayoutService.wait_ready().then(() => {\n            let create_callback = (goldenLayoutService, layout) => {\n              return () => {\n                goldenLayoutService.createChild(layout.cfg);\n              };\n            };\n            for (var i = 0; i < scope.layoutInfo.length; i++) {\n              let layout = scope.layoutInfo[i];\n              goldenLayoutService.createDragSource($(\"#\" + layout.id)[0], layout.cfg);\n              $(\"#\" + layout.id).click(create_callback(goldenLayoutService, layout));\n            }\n          });\n        }\n      };\n    }\n  ])\n  .directive('ngRightClick', [\"$parse\", function ($parse) {\n    return function (scope, element, attrs) {\n      var fn = $parse(attrs.ngRightClick);\n      element.bind('contextmenu', function (event) {\n        scope.$apply(function () {\n          event.preventDefault();\n          fn(scope, {\n            $event: event\n          });\n        });\n      });\n    };\n  }]);","angular.module('app.spinalcom')\n  .factory('ngSpinalCore', ['$q', function ($q) {\n    var service = {};\n    service.conn = 0;\n\n    service.connect = function (option) {\n      service.conn = spinalCore.connect(option);\n    };\n    service.store = function (model, path) {\n      var deferred = $q.defer();\n      spinalCore.store(service.conn, model, path, function (model) {\n        deferred.resolve(model);\n      }, function () {\n        deferred.reject();\n      });\n      return deferred.promise;\n    };\n    service.load = function (path) {\n      var deferred = $q.defer();\n      spinalCore.load(service.conn, path, function (model) {\n        deferred.resolve(model);\n      }, function () {\n        deferred.reject();\n      });\n      return deferred.promise;\n    };\n    service.load_type = function (model, path) {\n      var deferred = $q.defer();\n      spinalCore.load_type(service.conn, model, path, function (model) {\n        deferred.resolve(model);\n      }, function () {\n        deferred.reject();\n      });\n      return deferred.promise;\n    };\n    service.load_right = function (ptr) {\n      var deferred = $q.defer();\n      spinalCore.load_right(service.conn, ptr, function (model) {\n        deferred.resolve(model);\n      }, function () {\n        deferred.reject();\n      });\n      return deferred.promise;\n    };\n    service.share_model = function (data, filename, flag, target_username) {\n      return spinalCore.share_model(service.conn, data, filename, flag, target_username);\n    };\n    return service;\n  }]);","angular.module('app.spinalcom')\n  .factory('spinalModelDictionary', [\"$q\", \"ngSpinalCore\", \"config\", \"authService\", \"$routeParams\", \"$location\",\n    function ($q, ngSpinalCore, config, authService, $routeParams, $location) {\n      let factory = {};\n      factory.model = 0;\n      factory.init = () => {\n        var deferred = $q.defer();\n        if (factory.model == 0) {\n          authService.wait_connect().then(() => {\n            let user = authService.get_user();\n            let path = $routeParams.filepath;\n            console.log(path)\n            if (path) {\n              path = atob(path);\n              ngSpinalCore.load(path).then((m) => {\n                factory.model = m;\n                console.log(m);\n                deferred.resolve(m);\n\n              }, () => {\n                let msg = \"not able to load : \" + path;\n                console.error(msg);\n                $location.replace('/drive/');\n                deferred.reject(msg);\n              });\n            }\n          }, () => {\n            let msg = \"not able to load : \" + path;\n            console.error(msg);\n            $location.replace('/drive/');\n            deferred.reject(msg);\n          });\n        } else\n          deferred.resolve(factory.model);\n        return deferred.promise;\n      };\n      return factory;\n    }\n  ]);","angular.module('app.services')\n  .factory('goldenLayoutService', ['$q', '$window', '$templateCache', '$rootScope', '$compile',\n    function ($q, $window, $templateCache, $rootScope, $compile) {\n      var config = {\n        content: [{\n          type: 'row',\n          content: [{\n            isClosable: false,\n            title: \"Viewer\",\n            type: 'component',\n            componentName: 'SpinalHome',\n            componentState: {\n              template: 'forgeviewer.html',\n              controller: 'forgeViewerCtrl'\n            }\n          }]\n        }]\n      };\n      let myLayout = 0;\n      let factory = {};\n      factory.init = () => {\n        if (myLayout == 0) {\n          myLayout = new GoldenLayout(config, $(\"#g-layout\"));\n          myLayout.registerComponent('SpinalHome', function (container, state) {\n            var element = container.getElement();\n            if (state.template == '') {\n\n              element.html();\n              $compile(element.contents())($rootScope);\n            } else {\n              element.html(\"<div class=\\\"gpannel-content\\\" ng-controller=\\\"\" + state.controller + \"\\\" ng-cloak>\" +\n                $templateCache.get(state.template) + \"</div>\");\n              $compile(element.contents())($rootScope);\n            }\n          });\n\n          myLayout.init();\n          angular.element($window).bind('resize', function () {\n            myLayout.updateSize();\n          });\n          $rootScope.$emit(\"GoldenLayout_READY\");\n        }\n      };\n\n      factory.wait_ready = () => {\n        return $q(function (resolve, reject) {\n          $rootScope.$on(\"GoldenLayout_READY\", () => {\n            resolve();\n          });\n        });\n      };\n\n\n\n      factory.createChild = (config) => {\n        myLayout.root.contentItems[0].addChild(config);\n      };\n\n      factory.createDragSource = (element, config) => {\n        myLayout.createDragSource(element, config);\n\n      };\n\n\n      return factory;\n    }\n  ])\n  .factory('layout_uid', function () {\n    let uid = 0;\n    return ({\n      get: () => {\n        let id = uid++;\n        return id;\n      }\n    });\n  });","angular.module('app.spinalcom')\n  .factory('authService', [\"$q\", \"ngSpinalCore\", \"config\", \"$http\",\n    function ($q, ngSpinalCore, config, $http) {\n      let factory = {};\n      let user = {\n        username: \"\",\n        password: \"\",\n        id : \"\"\n      };\n      let is_Connected = false;\n      factory.save_user = (username, password, id) => {\n        user.username = username;\n        user.password = password;\n        user.id = id;\n        window.localStorage.setItem(\"spinalhome_cfg\", btoa(JSON.stringify(user)));\n      };\n      factory.get_user = () => {\n        let _user = window.localStorage.getItem(\"spinalhome_cfg\");\n        if (_user) {\n          user = JSON.parse(atob(_user));\n        }\n        return user;\n      };\n\n      factory.logout = (username, password) => {\n        if (user.username != \"\") {\n          factory.save_user(\"\", \"\",\"\");\n          location.reload();\n        }\n      };\n\n      factory.login = (username, password) => {\n        let deferred = $q.defer();\n        let url = \"/get_user_id\";\n        $http.get(url + \"?u=\" + username + \"&p=\" + password)\n          .then(function (data) {\n            var u = parseInt(data.data);\n            var i = 0;\n            if (u == -1) {\n              let msg = (\"Login Error: username / password pair not found.\");\n              // $mdToast.show(loginError_toast)\n              deferred.reject(msg);\n              for (i = 0; i < wait_connectList.length; i++) {\n                wait_connectList[i].reject();\n              }\n              wait_connectList = [];\n              return;\n            }\n            ngSpinalCore.connect(\"http://\" + u + \":\" + password +\n              \"@\" + config.spinalhub_url + \":\" + config.spinalhub_port + \"/\");\n            factory.save_user(username, password,u);\n            is_Connected = true;\n            deferred.resolve();\n            for (i = 0; i < wait_connectList.length; i++) {\n              wait_connectList[i].resolve();\n            }\n            wait_connectList = [];\n          }, function (data) {\n            let msg = ('Connection Error: Imposible to connect to the server.');\n            // $mdToast.show(connectionError_toast)\n            deferred.reject(msg);\n            for (var i = 0; i < wait_connectList.length; i++) {\n              wait_connectList[i].reject();\n            }\n            wait_connectList = [];\n          });\n        return deferred.promise;\n      };\n\n      factory.is_Connected = () => {\n        return is_Connected;\n      };\n      let wait_connectList = [];\n      factory.wait_connect = () => {\n        let deferred = $q.defer();\n        if (is_Connected == true) {\n          deferred.resolve();\n        } else\n          wait_connectList.push(deferred);\n        return deferred.promise;\n      };\n\n      return factory;\n    }\n  ]);","angular.module('app.controllers')\n  .controller('mainCtrl', [\"$scope\", \"$routeParams\", \"goldenLayoutService\", \"spinalModelDictionary\",\n    function ($scope, $routeParams, goldenLayoutService, spinalModelDictionary) {\n      goldenLayoutService.init();\n    }\n  ]);","angular.module('app.controllers')\n  .controller('navbarCtrl', [\"$scope\", \"authService\", \"$location\", \"$routeParams\",\n    function ($scope, authService, $location, $routeParams) {\n      $scope.username = \"\";\n      $scope.connected = false;\n      authService.wait_connect().then(() => {\n        $scope.username = authService.get_user().username;\n        $scope.connected = true;\n        $scope.viewer = $routeParams.filepath;\n        if ($scope.viewer) {\n          $scope.viewer = atob($scope.viewer);\n        } else {\n          $scope.viewer = \"viewer\";\n        }\n        console.log($routeParams.filepath);\n\n      });\n      $scope.logout = () => {\n        $location.path('/login');\n      };\n      // get in SpinalDrive_Env\n      $scope.layouts = [\n\n        {\n          id: \"drag-viewer\",\n          name: \"viewer\",\n          cfg: {\n            isClosable: true,\n            title: \"viewer\",\n            type: 'component',\n            componentName: 'SpinalHome',\n            componentState: {\n              template: 'forgeviewer.html',\n              controller: 'forgeViewerCtrl'\n            }\n          }\n        },\n\n\n      ];\n\n\n\n\n\n    }\n  ]);","angular.module('app.spinalforge.plugin')\n  .controller('forgeViewerCtrl', [\"$scope\", \"$rootScope\", \"$mdDialog\", \"authService\", \"$compile\", \"$injector\", \"layout_uid\", \"spinalModelDictionary\",\n    function ($scope, $rootScope, $mdDialog, authService, $compile, $injector, layout_uid, spinalModelDictionary) {\n      $scope.injector = $injector;\n      $scope.uid = layout_uid.get();\n      console.log(\"forgeviewerCtrl start\")\n      spinalModelDictionary.init().then(function (ForgeFile) {\n        var viewerApp, viewables, indexViewable;\n        console.log(\"forgeviewerCtrl start 2\")\n\n        var config3d = {\n          extensions: ['PannelAnnotation', \"Autodesk.ADN.Viewing.Extension.Color\"]\n        };\n        var options = {\n          env: 'AutodeskProduction',\n          accessToken: ''\n        };\n\n        var documentId = 'urn:' + ForgeFile.urn.get();\n        get_oAuthToken(ForgeFile, documentId, init_autodesk);\n\n        function get_oAuthToken(forgeFile, documentId, callback) {\n          forgeFile.oauth.set(\"\");\n          forgeFile.ask_token.set(true);\n          var ask_for_token = true;\n          var oauth_onchange = function () {\n            if (ask_for_token && forgeFile.oauth.get() != \"\") {\n              ask_for_token = false;\n              forgeFile.oauth.unbind(oauth_onchange);\n              options.accessToken = forgeFile.oauth.get();\n              callback(documentId);\n            }\n          };\n          forgeFile.oauth.bind(oauth_onchange);\n        }\n\n        function init_autodesk(documentId) {\n          Autodesk.Viewing.Initializer(options, function onInitialized() {\n            viewerApp = new Autodesk.Viewing.ViewingApplication('MyViewerDiv' + $scope.uid);\n            viewerApp.registerViewer(viewerApp.k3D, Autodesk.Viewing.Private.GuiViewer3D, config3d);\n            viewerApp.loadDocument(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);\n          });\n        }\n\n\n        function onDocumentLoadSuccess(doc) {\n          viewables = viewerApp.bubble.search({\n            'type': 'geometry',\n            'role': '3d'\n          });\n          if (viewables.length === 0) {\n            console.error('Document contains no viewables.');\n            return;\n          }\n          viewerApp.selectItem(viewables[viewables.length - 1].data, onItemLoadSuccess, onItemLoadFail);\n        }\n\n\n        function onDocumentLoadFailure(viewerErrorCode) {\n          console.error('onDocumentLoadFailure() - errorCode:' + viewerErrorCode);\n        }\n\n\n        function onItemLoadSuccess(viewer, item) {\n          console.log('Viewers are equal: ' + (viewer === viewerApp.getCurrentViewer()));\n        }\n\n\n        function onItemLoadFail(errorCode) {\n          console.error('onItemLoadFail() - errorCode:' + errorCode);\n        }\n\n      });\n\n\n    }\n  ]);","angular.module('app.controllers')\n  .controller('loginCtrl', [\"$scope\", \"authService\", \"$mdToast\", \"$location\",\n    function ($scope, authService, $mdToast, $location) {\n      let toast = $mdToast.simple()\n        .hideDelay(3000);\n      let user = authService.get_user();\n      authService.logout();\n      $scope.conf = {\n        email: \"\",\n        password: \"\"\n      };\n      $scope.ConnectBtn = () => {\n        authService.login($scope.conf.email, $scope.conf.password).then(\n          () => {\n            $location.path('/home');\n          },\n          (err) => {\n            toast.textContent(err);\n            $mdToast.show(toast);\n          }\n        );\n      };\n\n    }\n  ]);","angular.module('app.spinalforge.plugin').run([\"spinalModelDictionary\", \"$mdDialog\", \"authService\",\n  function (spinalModelDictionary, $mdDialog, authService) {\n\n    class PannelAnnotation {\n      constructor(viewer, options) {\n        Autodesk.Viewing.Extension.call(this, viewer, options);\n        this.viewer = viewer;\n        viewer.registerContextMenuCallback('rightClickMenu', (menu, status) => {\n           menu.push({\n             title : 'See Annotation',\n             target: () => {\n              var items = this.viewer.getSelection();          \n\n              if (items.length == 1) {\n                document.getElementById(\"search\").value = items[0];\n                var list = document.getElementById(\"allList\");\n  \n                this.getContainer(items[0], (data) => {\n                  this.changeContainer(list, data);\n                });\n              } else\n                alert(\"you must select 1 item\");\n             }\n           })\n        });\n\n        this.panel = null;\n        this.user = authService.get_user();\n        this.detailPanelContent = null;\n        this.detailPanel = null;\n        this._selected = null;\n\n        console.log(this.user);\n      }\n\n      load() {\n        if (this.viewer.toolbar) {\n          this.createUI();\n        } else {\n          this.onToolbarCreatedBinded = this.onToolbarCreated.bind(this);\n          this.viewer.addEventListener(av.TOOLBAR_CREATED_EVENT, this.onToolbarCreatedBinded);\n        }\n        return true;\n      }\n\n      onToolbarCreated() {\n        this.viewer.removeEventListener(av.TOOLBAR_CREATED_EVENT, this.onToolbarCreatedBinded);\n        this.onToolbarCreatedBinded = null;\n        this.createUI();\n      }\n\n      /*RightClick(menu, status) {\n        console.log(viewer);\n        menu.push({\n          title: 'See Annotation',\n          target: () => {\n            var items = this.viewer.getSelection();          \n\n            if (items.length == 1) {\n              document.getElementById(\"search\").value = items[0];\n              var list = document.getElementById(\"allList\");\n\n              this.getContainer(items[0], (data) => {\n                this.changeContainer(list, data);\n              });\n            } else\n              alert(\"you must select 1 item\");\n          }\n        });\n      }*/\n\n      unload() {\n        this.viewer.toolbar.removeControl(this.subToolbar);\n        return true;\n      }\n\n      createUI() {\n        var title = 'Annotation';\n        this.panel = new PanelClass(this.viewer, title);\n\n        this.initialize();\n\n        var button1 = new Autodesk.Viewing.UI.Button('Annotation');\n        button1.setIcon(\"fa-pencil\");\n\n        button1.onClick = (e) => {\n          if (!this.panel.isVisible()) {\n            this.panel.setVisible(true);\n          } else {\n            this.panel.setVisible(false);\n          }\n        };\n\n        button1.addClass('Annotation');\n        button1.setToolTip('Annotation');\n\n        this.subToolbar = new Autodesk.Viewing.UI.ControlGroup('my-Annotation');\n        this.subToolbar.addControl(button1);\n        this.viewer.toolbar.addControl(this.subToolbar);\n      }\n\n      initialize() {\n\n\n        this.panel.initializeMoveHandlers(this.panel.container);\n        // this.panel.container.appendChild(this.panel.createCloseButton());\n        var _container = this.panel.container;\n\n        var func_success = (data) => {\n          var container = _container;\n          var allNotes = data;\n          container.className += \" panelViewer\";\n\n          ////////////////////////////////////////////////\n          //             Button Add Note                //\n          ////////////////////////////////////////////////\n          var headerDiv = document.createElement('div');\n          headerDiv.className = \"spin row head\";\n\n          //create note button\n          var cDiv = document.createElement('div');\n          cDiv.className = \"col-sm-3 col-md-3 col-xs-3\";\n\n          var createNote = document.createElement('button');\n          createNote.className = \"btn btn-primary btn-sm btn-block\";\n          createNote.innerHTML = '<i class=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i> Note';\n\n          createNote.onclick = () => {\n            var confirm = $mdDialog.prompt()\n              .title('New Note')\n              .placeholder('Please enter the title')\n              .ariaLabel('New Note')\n              .clickOutsideToClose(true)\n              .required(true)\n              .ok('Create!')\n              .cancel('Cancel');\n            $mdDialog.show(confirm).then((result) => {\n              this.AddNote(result);\n            }, function () {});\n          };\n\n          //color all\n          var vDiv = document.createElement('div');\n          vDiv.className = \"col-sm-3 col-md-3 col-xs-3\"\n          var viewButton = document.createElement('button');\n          viewButton.className = \"btn btn-primary btn-sm btn-block\";\n          viewButton.innerHTML = '<i class=\"fa fa-eye\" aria-hidden=\"true\"></i> View';\n\n          viewButton.onclick = () => {\n            this.changeAllItemsColor();\n            this.changeAllIcon(\"fa-eye-slash\", true);\n          };\n\n          //hide all\n          var hDiv = document.createElement('div');\n          hDiv.className = \"col-sm-3 col-md-3 col-xs-3\";\n          var hideButton = document.createElement('button');\n          hideButton.className = \"btn btn-primary btn-sm btn-block\";\n          hideButton.innerHTML = '<i class=\"fa fa-eye-slash\" aria-hidden=\"true\"></i> Hide';\n\n          //--------------------------------------------------------------------------------------------\n          hideButton.onclick = () => {\n            this.restoreAllItemsColor();\n            this.changeAllIcon(\"fa-eye\", false);\n          };\n          //--------------------------------------------------------------------------------------------\n\n          ///////////////////////////////////////////////\n          //            Card List                      //\n          ///////////////////////////////////////////////\n          var list = document.createElement('div');\n          list.className = \"list-group\";\n          list.id = \"allList\";\n\n          ///////////////////////////////////////////////\n          //             Search Input                  //\n          ///////////////////////////////////////////////\n          var searchDiv = document.createElement('div');\n          searchDiv.className = \"spin input-group\";\n\n          var searchIcon = document.createElement('span');\n          searchIcon.className = \"icon input-group-addon\";\n          searchIcon.innerHTML = '<i class=\"fa fa-search\" aria-hidden=\"true\"></i>';\n\n          var search = document.createElement('input');\n          search.className = \"input form-control toolbar-search-box\";\n          search.type = \"number\";\n          search.id = \"search\";\n          search.placeholder = \"item id\";\n\n          search.onclick = function () {\n            search.focus();\n          };\n\n          search.oninput = () => {\n            if (search.value != \"\") {\n              this.getContainer(parseInt(search.value), (data) => {\n                this.changeContainer(list, data);\n              });\n            } else {\n              this.changeContainer(list, allNotes);\n            }\n          };\n\n          //button header\n          cDiv.appendChild(createNote);\n          vDiv.appendChild(viewButton);\n          hDiv.appendChild(hideButton);\n\n          headerDiv.appendChild(cDiv);\n          headerDiv.appendChild(vDiv);\n          headerDiv.appendChild(hDiv);\n\n          container.appendChild(headerDiv);\n\n          //search\n          searchDiv.appendChild(searchIcon);\n          searchDiv.appendChild(search);\n          container.appendChild(searchDiv);\n\n          //list\n          container.appendChild(list);\n\n          ///////////////////////////////////////////////\n          //          When notes change                //\n          ///////////////////////////////////////////////\n          allNotes.bind(() => {\n            this.changeContainer(list, allNotes);\n          });\n        };\n\n        spinalModelDictionary.init().then((m) => {\n          if (m) {\n            if (m.annotationPlugin) {\n              m.annotationPlugin.load((mod) => {\n                this.model = mod;\n                func_success(this.model);\n              });\n            } else {\n              this.model = new Lst();\n              m.add_attr({\n                annotationPlugin: new Ptr(this.model)\n              });\n\n              func_success(this.model);\n            }\n\n          }\n\n        });\n      }\n\n      AddNote(title, color = \"#000000\") {\n        var notes = this.model;\n        var id = newGUID();\n\n        var newNote = new NoteModel();\n        newNote.title.set(title);\n        newNote.color.set(color);\n        newNote.id.set(id);\n        newNote.date.set(Date.now());\n        newNote.owner.set(this.user.id);\n        newNote.username.set(this.user.username);\n\n        var otherNotes = notes;\n        otherNotes.push(newNote);\n        notes.mod_attr(otherNotes);\n      }\n\n      AddItems(id) {\n        var noteSelected, indexNote;\n        var items = this.viewer.getSelection();\n        var notes = this.model;\n\n\n        if (items.length == 0) {\n          alert('No model selected !');\n          return;\n        }\n\n        this.viewer.model.getBulkProperties(items, {\n          propFilter: ['name']\n        }, (models) => {\n\n          for (var i = 0; i < notes.length; i++) {\n            if (notes[i].id == id) {\n              noteSelected = notes[i].allObject;\n              indexNote = i;\n              break;\n            }\n          }\n\n          for (var j = 0; j < models.length; j++) {\n            noteSelected.push(models[j]);\n          }\n          notes[indexNote].allObject = noteSelected;\n        }, function () {\n          console.log(\"error\");\n        });\n\n\n      }\n\n      getContainer(id, callback) {\n        var notes = this.model;\n\n        var containers = notes.filter((element) => {\n\n          return element.allObject.filter(\n            (e) => {\n              return e.dbId.get() == id;\n            }\n          ).length > 0;\n        });\n        callback(containers);\n      }\n\n      changeColorInHub(id, color) {\n        var noteSelected, indexNote;\n        var notes = this.model;\n        for (var i = 0; i < notes.length; i++) {\n          if (notes[i].id == id) {\n            notes[i].color.set(color);\n          }\n        }\n      }\n\n      changeItemColor(id) {\n        var ids = [];\n        var selected;\n        var notes = this.model;\n        for (var i = 0; i < notes.length; i++) {\n          if (notes[i].id == id) {\n            selected = notes[i];\n            for (var j = 0; j < selected.allObject.length; j++) {\n\n              ids.push(selected.allObject[j].dbId.get());\n            }\n          }\n        }\n        this.viewer.setColorMaterial(ids, selected.color.get(), selected.id.get());\n      }\n\n      restoreColor(id) {\n        var ids = [];\n        var selected;\n        var notes = this.model;\n        for (var i = 0; i < notes.length; i++) {\n          if (notes[i].id == id) {\n            selected = notes[i];\n            for (var j = 0; j < selected.allObject.length; j++) {\n              ids.push(selected.allObject[j].dbId.get());\n            }\n          }\n        }\n        this.viewer.restoreColorMaterial(ids, id);\n      }\n\n      changeAllItemsColor() {\n        var objects = [];\n        var notes = this.model;\n        for (var i = 0; i < notes.length; i++) {\n          var ids = [];\n          var color;\n          for (var j = 0; j < notes[i].allObject.length; j++) {\n            ids.push(notes[i].allObject[j].dbId.get());\n          }\n          color = notes[i].color.get();\n          objects.push({\n            ids: ids,\n            color: color,\n            id: notes[i].id\n          });\n        }\n        this.viewer.colorAllMaterials(objects);\n      }\n\n      restoreAllItemsColor() {\n        var objects = [];\n        var notes = this.model;\n        for (var i = 0; i < notes.length; i++) {\n          var ids = [];\n\n          for (var j = 0; j < notes[i].allObject.length; j++) {\n            ids.push(notes[i].allObject[j].dbId.get());\n          }\n          objects.push({\n            ids: ids,\n            id: notes[i].id\n          });\n        }\n        this.viewer.restoreAllMaterialColor(objects);\n      }\n\n      deleteNoteItem(note, item = null) {\n\n        var notes = this.model;\n\n        if(item != null) {\n          for (let i = 0; i < notes.length; i++) {\n            if(notes[i].id == note) {\n              for(var j = 0; j < notes[i].allObject.length; j++){\n                if(notes[i].allObject[j].dbId == item) {\n                    notes[i].allObject.splice(j,1);\n                    break;\n                }\n              }\n            }\n              \n          }\n        } else {\n          for (let i = 0; i < notes.length; i++) {\n              if(notes[i].id == note){\n                  notes.splice(i,1);\n                  break;\n              }\n          }\n        }\n      }\n\n      changeAllIcon(iconName, show) {\n        var notes = this.model;\n        for (var i = 0; i < notes.length; i++) {\n          var element = document.getElementsByClassName(\"show\" + notes[i].id)[0];\n          element.innerHTML = `<i class=\"fa ${iconName}\" aria-hidden=\"true\"></i>`;\n          element.show = show;\n        }\n      }\n\n      renameNote(id,title) {\n        var notes = this.model;\n        for (let i = 0; i < notes.length; i++) {\n          if(notes[i].id == id) {\n              notes[i].title.set(title);\n              break;\n          } \n        }\n      }\n\n      //////////////////////////////////////////////////////////////\n      //                  Change container                        //\n      //////////////////////////////////////////////////////////////\n      changeContainer(list, allNotes) {\n        list.innerHTML = \"\";\n        var _self = this;\n\n        if (allNotes.length > 0) {\n\n          for (var index = 0; index < allNotes.length; index++) {\n            var _object = allNotes[index];\n            var title = _object.title.get();\n            var id = _object.id.get();\n            var color = _object.color.get();\n\n            var card = document.createElement('div');\n            card.className = \"card\";\n\n            //card header\n            var header = document.createElement('div');\n            header.className = 'card-header row';\n            // header.role = \"tab\";\n            header.setAttribute('role', 'tab');\n            header.id = \"headerNote\" + index;\n            header.innerHTML = `<div class=\"col-sm-4 col-md-4 col-xs-4\">\n                      <a href=\"javascript:;\" data-toggle=\"collapse\" data-target=\"#notes${index}\" aria-expanded=\"true\" aria-controls=\"notes${index}\">${title}</a>\n                  </div>`;\n\n            var btn_group = document.createElement(\"div\");\n            btn_group.className = \"btn-group btn-group-lg\";\n\n            //add items\n            var addButton = document.createElement('button');\n            addButton.className = \"btn\";\n            addButton.innerHTML = '<i class=\"fa fa-plus\" aria-hidden=\"true\"></i>';\n            addButton.title = \"Add item selected\"\n            addButton.id = id;\n            addButton.onclick = function() {\n                _self.AddItems(this.id);\n            }\n\n            //Color\n            var colorButton = document.createElement('input');\n            colorButton.className = \"btn\";\n            colorButton.setAttribute('type','color');\n            colorButton.value = color;\n            colorButton.title = \"change color\";\n            colorButton.id = id;\n            colorButton.onchange = function(){\n              _self.changeColorInHub(this.id,this.value);\n            }\n\n            //changeColor items\n            var viewButton = document.createElement('button');\n            viewButton.className = \"btn show\" + id;\n            viewButton.title = \"show all elements\";\n            viewButton.innerHTML = '<i class=\"fa fa-eye\" aria-hidden=\"true\"></i>';\n            viewButton.id = id;\n            viewButton.setAttribute(\"show\",false);\n\n\n            viewButton.onclick = function() {\n                if(this.show == true) {\n                  _self.restoreColor(this.id);\n                  this.show = false;\n                  this.innerHTML = '<i class=\"fa fa-eye\" aria-hidden=\"true\"></i>';\n                } else {\n                  _self.changeItemColor(this.id);\n                  this.show = true;\n                  this.innerHTML = '<i class=\"fa fa-eye-slash\" aria-hidden=\"true\"></i>';\n                }  \n                \n            }\n\n            //Rename notes\n            var renameButton = document.createElement(\"button\");\n            renameButton.className = \"btn\";\n            renameButton.title = \"rename\";\n            renameButton.id = id;\n            renameButton.innerHTML = '<i class=\"fa fa-pencil\" aria-hidden=\"true\"></i>';\n            \n            renameButton.onclick = function(){\n\n              var confirm = $mdDialog.prompt()\n              .title('Rename Note')\n              .placeholder('Please enter the title')\n              .ariaLabel('Rename')\n              .clickOutsideToClose(true)\n              .required(true)\n              .ok('Rename')\n              .cancel('Cancel');\n              $mdDialog.show(confirm).then((result) => {\n                _self.renameNote(this.id,result);\n              }, function () {});\n\n            }\n\n            //remove notes\n            var deleteButton = document.createElement(\"button\");\n            deleteButton.className = \"btn\";\n            deleteButton.title = \"delete\";\n            deleteButton.id = id;\n            deleteButton.innerHTML = '<i class=\"fa fa-trash\" aria-hidden=\"true\"></i>';\n\n            deleteButton.onclick = function() {\n              _self.deleteNoteItem(this.id);\n            }\n\n\n            //detail\n            var detailButton = document.createElement(\"button\");\n            detailButton.className = \"btn\";\n            detailButton.title = \"See detail\";\n            detailButton.id = id;\n            detailButton.innerHTML = '<i class=\"fa fa-info\" aria-hidden=\"true\"></i>';\n\n            detailButton.onclick = function() {\n              _self.DetailPanel(this.id);\n            }\n\n\n            btn_group.appendChild(addButton);\n            btn_group.appendChild(colorButton);\n            btn_group.appendChild(viewButton);\n            btn_group.appendChild(renameButton);\n            btn_group.appendChild(deleteButton);\n            btn_group.appendChild(detailButton);\n\n            header.appendChild(btn_group);\n\n            //collapse\n            var collapse = document.createElement('div');\n            collapse.id = \"notes\" + index;\n            collapse.className = \"collapse\";\n\n            collapse.setAttribute('role', 'tabpanel');\n            collapse.setAttribute('aria-labelledby', 'notes' + index);\n            collapse.setAttribute('data-parent', '#accordion');\n\n            //card body\n            var body = document.createElement('div');\n            body.className = \"card-body\";\n\n            //----------------------------------------- items --------------------------------------------------------------------------------------------\n            var items = document.createElement('ul');\n            items.className = \"list-group\";\n            var x = _object.allObject.length;\n            var li;\n            if (x > 0) {\n              for (var i = 0; i < x; i++) {\n                li = document.createElement('li');\n                li.className = \"list-group-item d-flex justify-content-between align-items-center\";\n                li.innerHTML = _object.allObject[i].name;\n\n                var b = document.createElement('button');\n                b.className = \"btn badge\";\n                b.id = id + \"/\" + _object.allObject[i].dbId;\n                b.innerHTML = '<i class=\"fa fa-trash-o\" aria-hidden=\"true\"></i>';\n\n                b.onclick = () => {\n                  var t = b.id.split(\"/\");\n                  _self.deleteNoteItem(t[0], t[1]);\n                };\n\n                li.appendChild(b);\n                items.appendChild(li);\n              }\n            } else {\n              li = document.createElement('span');\n              li.innerText = \"No item\";\n              items.appendChild(li);\n            }\n            body.appendChild(items);\n            collapse.appendChild(body);\n\n            card.appendChild(header);\n            card.appendChild(collapse);\n\n            list.appendChild(card);\n\n          }\n        } else {\n          list.innerHTML = \"<h6>No item found</h6>\";\n        }\n      }\n\n      ////////////////////////////////////////////////////\n      //                END                             //\n      ///////////////////////////////////////////////////\n\n      DetailPanel(id) {\n        var notes = this.model;\n\n\n        if(this.detailPanelContent == null){\n          this.detailPanelContent = document.createElement('div');\n          this.detailPanelContent.className = \"content\";\n        }\n\n        if(this.detailPanel == null) {\n          this.detailPanel = new PanelClass(this.viewer,id);\n          this.detailPanel.initializeMoveHandlers(this.detailPanel.container);\n          this.detailPanel.container.appendChild(this.detailPanel.createCloseButton());\n          this.detailPanel.container.style.right = \"0px\";\n          this.detailPanel.container.style.width = \"400px\";\n          this.detailPanel.container.style.height = \"600px\";\n          this.detailPanel.container.padding = \"0px\";\n\n        }\n\n        for (let index = 0; index < notes.length; index++) {\n          if(notes[index].id == id){\n              this._selected = notes[index];\n              break;\n          }   \n        }\n\n        var formDiv = document.createElement('div');\n        formDiv.className = \"form_div\";\n\n\n        var textareaDiv = document.createElement('div');\n        textareaDiv.className = \"textarea_div\";\n\n        var inputText = document.createElement('textarea');\n        inputText.className = \"form-control\";\n        inputText.setAttribute('rows','2')\n        inputText.id = id;\n        inputText.placeholder = \"add texte\";\n\n        inputText.onclick = () => {\n          inputText.focus();\n        }\n\n        textareaDiv.appendChild(inputText);\n\n        var sendButtonDiv = document.createElement('div');\n        sendButtonDiv.className = \"send_button_div\"\n\n        var sendButton = document.createElement('button');\n        sendButton.className = \"btn btn-block\";\n        sendButton.textContent = \"Add\";\n        sendButton.id = id;\n\n        sendButton.onclick = () => {\n            var textAreaValue = document.querySelector(`textarea[id='${sendButton.id}']`).value;\n            document.querySelector(`textarea[id='${sendButton.id}']`).value = \"\";\n\n            var message = new MessageModel();\n            message.id.set(newGUID());\n            message.owner.set(this.user.id);\n            message.username.set(this.user.username);\n            message.date.set(Date.now());\n            message.message.set(textAreaValue);\n\n            this._selected.notes.push(message);\n\n            //this.DisplayMessage(formDiv);\n        }\n\n        sendButtonDiv.appendChild(sendButton);\n        \n        formDiv.appendChild(textareaDiv);\n        formDiv.appendChild(sendButtonDiv);\n        \n        \n        notes.bind( () => {   \n          this.DisplayMessage(formDiv)\n        });\n\n\n\n      }\n\n      DisplayMessage(formDiv) {\n        var _self = this;\n        var messageContainer = document.createElement('div');\n        messageContainer.className = \"messageContainer\"; \n\n        for (let i = 0; i < this._selected.notes.length; i++) {\n            //message div\n            var message_div = document.createElement('div');\n            message_div.className = \"message_div\";\n\n            //header message\n            var _message = document.createElement('div');\n            _message.className = \"_message\";\n            \n            //name\n            var message_owner = document.createElement('div');\n            message_owner.className = \"message_owner\";\n            message_owner.innerText = this._selected.notes[i].username.get();\n\n\n            //date\n            var message_date = document.createElement('div');\n            message_date.className = \"message_date\";\n            var date = new Date(parseInt(this._selected.notes[i].date));\n            message_date.innerText =   date.getDate() + \"/\" + date.getMonth() + 1 + \"/\" + date.getFullYear();\n\n            \n\n            //message content\n            var message_content = document.createElement('div');\n            message_content.className = \"message_content\";\n\n            var message_texte = document.createElement('div');\n            message_texte.className = \"message_texte\";\n            message_texte.innerHTML = this._selected.notes[i].message;\n\n            if(this._selected.notes[i].owner == this.user.id) {\n              var closeDiv = document.createElement('div');\n              closeDiv.className = \"close_div\";\n\n              var span = document.createElement('span');\n              span.innerHTML = \"X\";\n              span.className = \"close\";\n              span.id = this._selected.notes[i].id\n\n              span.onclick = function(){\n                _self.deteteMessage(this.id,formDiv);\n              }\n\n              closeDiv.appendChild(span);\n              message_content.appendChild(closeDiv);\n            }\n\n            message_content.appendChild(message_texte);\n\n            _message.appendChild(message_owner);\n            _message.appendChild(message_content);\n            \n\n\n            message_div.appendChild(message_date);\n            message_div.appendChild(_message);\n            \n\n            messageContainer.appendChild(message_div);\n\n        }\n\n\n        this.detailPanelContent.innerHTML = \"\";\n\n        this.detailPanelContent.appendChild(messageContainer);\n        this.detailPanelContent.appendChild(formDiv);\n\n        this.detailPanel.setTitle(this._selected.title.get());\n        this.detailPanel.setVisible(true);\n        this.detailPanel.container.appendChild(this.detailPanelContent);\n\n        var d = document.getElementsByClassName(\"messageContainer\")[0];\n        d.scrollTop = d.scrollHeight;\n    \n      }\n\n      deteteMessage(id, formDiv) {\n        \n        for (let i = 0; i < this._selected.notes.length; i++) {\n          \n          if(this._selected.notes[i].id == id) {\n            this._selected.notes.splice(i,1);\n            // this.DisplayMessage(formDiv);\n            break;\n          }\n          \n        }\n\n\n      }\n\n\n    } // end class\n    Autodesk.Viewing.theExtensionManager.registerExtension('PannelAnnotation', PannelAnnotation);\n  } // end run\n]);"]}