(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function(n){"use strict";var t=function(){function n(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";e(this,n),this.name=t,this.label=i,this.id=o,this.icon=r,this.description=a,this.order_priority=0}return t(n,[{key:"action",value:function(n){}},{key:"launch_action",value:function(n){this.action(n)}},{key:"is_shown",value:function(n){return!0}}]),n}();i.SetLog=!1,module.exports=i,n._createClass=t,n._classCallCheck=e,n.SpinalDrive_App=i}).call(window,window);

},{}],2:[function(require,module,exports){
(function(i){"use strict";var t=function(){function i(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function e(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var n=require("./SpinalDrive_App"),r=function(){function i(){e(this,i),this._list=[]}return t(i,[{key:"is_valid_obj",value:function(i){return void 0!==i.name&&void 0!==i.label&&void 0!==i.id&&void 0!==i.icon&&void 0!==i.description}},{key:"push",value:function(i){if(i instanceof n||this.is_valid_obj(i)){for(var t=0;t<this._list.length;t++)if(this._list[t].name===i.name)return void(this._list[t]=i);this._list.push(i)}else console.error("Error trying to Push not a SpinalDrive_App Object or equivalent.")}},{key:"remove_by_name",value:function(i){if(void 0!==i)for(var t=0;t<this._list.length;t++)if(i===this._list[t].name)return this._list.splice(t,1),!0;return!1}},{key:"remove_by_id",value:function(i){if(void 0!==i)for(var t=0;t<this._list.length;t++)if(i===this._list[t].id)return this._list.splice(t,1),!0;return!1}},{key:"get",value:function(i){return void 0===i?this._list[i]:this._list}},{key:"length",value:function(){return this._list.length}},{key:"get_by_name",value:function(i){for(var t=0;t<this._list.length;t++)if(i===this._list[t].name)return this._list[t];return 0}}]),i}();module.exports=r,i._createClass=t,i._classCallCheck=e,i.SpinalDrive_App=n,i.SpinalDrive_App_list=r}).call(window,window);

},{"./SpinalDrive_App":1}],3:[function(require,module,exports){
(function(n){"use strict";var t=function(){function n(n,t){for(var i=0;i<t.length;i++){var e=t[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}}();function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var e=require("./SpinalDrive_App"),r=require("./SpinalDrive_App_list"),o=function(){function n(){i(this,n),this.containerLst={},this.context_file_exp_app_icon={Directory:"folder",Session:"desktop_windows",default:"insert_drive_file"}}return t(n,[{key:"add_applications",value:function(n,t){return this.containerLst[n]||(this.containerLst[n]=new r),this.containerLst[n].push(t)}},{key:"get_applications",value:function(n,t){return this.containerLst[n]||(this.containerLst[n]=new r),this.containerLst[n]._list.filter(function(n){return n.is_shown(t)}).sort(function(n,t){return n.order_priority<t.order_priority})}}]),n}();module.exports=o,n._createClass=t,n._classCallCheck=i,n.SpinalDrive_App=e,n.SpinalDrive_App_list=r,n.SpinalDrive_Env=o}).call(window,window);

},{"./SpinalDrive_App":1,"./SpinalDrive_App_list":2}],4:[function(require,module,exports){
!function(e){"use strict";var i=require("./core/SpinalDrive_Env"),n=new i;module.exports=n,e.SpinalDrive_Env=i,e.spinalDrive_Env=n}(window);

},{"./core/SpinalDrive_Env":3}],5:[function(require,module,exports){
(function(e){"use strict";var t=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(e){function i(){r(this,i);var e=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"DeleleFileExplorer","Delete",1,"delete","Delete the file"));return e.order_priority=-1,e}return n(i,SpinalDrive_App),t(i,[{key:"action",value:function(e){var t=e.scope.injector.get("$mdDialog"),r="Are you sure to delete the file / folder";e&&e.file&&e.file.name&&(r+=" : "+e.file.name);var o=t.confirm().title("Delete").textContent(r).ariaLabel("Delete Directory file").clickOutsideToClose(!0).ok("Confirm").cancel("Cancel");t.show(o).then(function(){if(e&&e.scope&&e.scope.curr_dir&&e.file&&e.file._server_id){var t=FileSystem._objects[e.file._server_id];if(t)for(var r=e.scope.curr_dir,o=0;o<r.length;o++)if(r[o]._server_id==t._server_id&&e.file.name==r[o].name.get()){r.remove_ref(r[o]);break}}},function(){})}}]),i}();module.exports.FileExplorerDelete=i;var l=function(e){function i(){return r(this,i),o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"DeleleFolderExplorer","Delete",0,"fa fa-trash text-danger","Delete the file"))}return n(i,SpinalDrive_App),t(i,[{key:"action",value:function(e){var t=e.scope.injector.get("$mdDialog"),r=e.scope.injector.get("spinalFileSystem"),o="Are you sure to delete the folder";e&&e.node&&e.node.text&&(o+=" : "+e.node.text);var n=t.confirm().title("Delete").textContent(o).ariaLabel("Delete Directory file").clickOutsideToClose(!0).ok("Confirm").cancel("Cancel");t.show(n).then(function(){r.deleteFolder(e.scope.all_dir,e.node)},function(){})}}]),i}();module.exports.FolderExplorerDelete=l,e._createClass=t,e._classCallCheck=r,e._possibleConstructorReturn=o,e._inherits=n,e.SpinalDrive_App_FileExplorer_delete=i,e.SpinalDrive_App_FolderExplorer_delete=l}).call(window,window);

},{}],6:[function(require,module,exports){
(function(t){"use strict";var e=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t){function e(){return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,SpinalDrive_App),e}();a.DialogEditCtrl=function(t,e,o,n,i,a){var r=FileSystem._objects[o];t.editModel=r,t.modelData=r.get(),t.editModelContruct=r.constructor.name,t.editForm={},t.cancelDialog=function(){e.hide()},t.submitDialog=function(){r.set(t.editForm.modelData.$modelValue),e.hide()},t.isStr=function(t){return t instanceof Str},t.isVal=function(t){return t instanceof Val},t.isBool=function(t){return t instanceof Bool}},a.EditTemplate='<md-dialog aria-label="Sharing setting">  <md-dialog-content style="padding-left: 10px;padding-right: 10px;">        <h3>Edit Setting</h3>        <h5 style="margin-top: 30px;margin-bottom: 35px;">Type: {{editModelContruct}}</h5><form name="editForm" ng-submit="submitDialog()">    <md-input-container ng-if="isStr(editModel)" style="margin: 0;" class="md-block">      <label>Data</label>      <input ng-model="modelData" name="modelData" md-autofocus>    </md-input-container>    <md-input-container ng-if="isVal(editModel)" style="margin: 0;" class="md-block">      <label>Data</label>      <input type="number" name="modelData"  ng-model="modelData" md-autofocus>    </md-input-container>    <md-input-container ng-if="isBool(editModel)"style="margin: 0;" class="md-block">      <label>Data</label>      <md-select name="modelData"ng-model="modelData" md-autofocus>        <md-option value=true>true</md-option>        <md-option value=false>false</md-option>      </md-select>    </md-input-container> <p class="p-error fadein" ng-repeat="error_msg in error_msgs">{{error_msg}}</p>  </md-dialog-content>  <md-dialog-actions>    <md-buttongfngf ng-click="cancelDialog()" class="md-primary">      Cancel    </md-button>    <md-button ng-click="submitDialog()" class="md-primary">      Submit    </md-button>  </md-dialog-actions></md-dialog>';var r=function(t){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,"EditInspector","Edit...",3,"edit","Edit Atomic Models..."))}return i(r,a),e(r,[{key:"action",value:function(t){var e=t.scope.injector.get("spinalModelDictionary"),o=t.scope.injector.get("$mdDialog"),n=t.scope.injector.get("ngSpinalCore");o.show({ariaLabel:"Edit",controller:["$scope","$mdDialog","model_server_id","spinalModelDictionary","mdDialog","ngSpinalCore",a.DialogEditCtrl],template:a.EditTemplate,parent:angular.element(document.body),clickOutsideToClose:!0,locals:{model_server_id:t.model_server_id,spinalModelDictionary:e,mdDialog:o,ngSpinalCore:n}})}},{key:"is_shown",value:function(t){if(t&&t.data&&t.data._server_id){var e=FileSystem._objects[t.data._server_id];if(e)return e instanceof Val||e instanceof Bool||e instanceof Str}return!1}}]),r}();module.exports.InspectorEdit=r,t._createClass=e,t._classCallCheck=o,t._possibleConstructorReturn=n,t._inherits=i,t.SpinalDrive_App_Edit=a,t.SpinalDrive_App_Inspector_edit=r}).call(window,window);

},{}],7:[function(require,module,exports){
(function(e){"use strict";var r=function(){function e(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}();function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function o(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var n=function(e){function n(){return t(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"IssimFileExplorerCurrDir","New Is'sim app",1,"desktop_windows","Create an Is'sim app"))}return o(n,SpinalDrive_App),r(n,[{key:"action",value:function(e){var r=e.scope.injector.get("$mdDialog"),t=r.prompt().title("New Is'sim session Project").placeholder("Project session name").ariaLabel("new issim").clickOutsideToClose(!0).required(!0).ok("Create!").cancel("Cancel");r.show(t).then(function(r){var t=e.scope.curr_dir;t&&t.add_file(r,0,{model_type:"Session",icon:"Session"})},function(){})}}]),n}();module.exports.FileExplorerCurrDirIssim=n;var s=function(n){function s(){t(this,s);var e=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,"IssimFileExplorer","Open with Is'sim",1,"desktop_windows","Open with Is'sim"));return e.order_priority=5,e}return o(s,SpinalDrive_App),r(s,[{key:"action",value:function(r){for(var t=r.scope.injector.get("authService"),i=r.scope.fs_path,o="/__users__/"+t.get_user().username,n=1;n<i.length;n++)o+="/"+i[n].name;o+="/"+r.file.name;var s=e.open("","");s.document.location="/html/lab.html#"+encodeURI(o),s.focus()}},{key:"is_shown",value:function(e){if(e&&e.file&&e.file._server_id){var r=FileSystem._objects[e.file._server_id];if(r&&r instanceof File&&r._info.model_type&&"Session"===r._info.model_type.get())return!0}return!1}}]),s}();module.exports.FileExplorerIssim=s,e._createClass=r,e._classCallCheck=t,e._possibleConstructorReturn=i,e._inherits=o,e.SpinalDrive_App_FileExplorer_currdir_issim=n,e.SpinalDrive_App_FileExplorer_issim=s}).call(window,window);

},{}],8:[function(require,module,exports){
(function(e){"use strict";var t=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,SpinalDrive_App),t}();a.DialogShareCtrl=function(e,t,r,o,i,a){function n(e,t){return e&t?"Yes":"No"}o.init().then(function(){e.users=o.users.get(),e.rightRead=!1,e.rightWrite=!1,e.rightShare=!1,e.users.forEach(function(e){e.share_selected=!1,e._lowername=e.name.toLowerCase()});var t=FileSystem._objects[r],i=0;i=t instanceof File?t._ptr.data.value:t instanceof Ptr?t.data.value:t._server_id,a.load_right(i).then(function(t){!function(t){e.selectedModelShared_to_user=[];for(var r=0;r<t.length;r++){var o=t[r];e.selectedModelShared_to_user.push({id:o.user.id.get(),name:o.user.name.get(),rd:n(o.flag.get(),spinalCore.right_flag.RD),wr:n(o.flag.get(),spinalCore.right_flag.WR),ad:n(o.flag.get(),spinalCore.right_flag.AD)})}}(t)},function(e){console.error("load_right: couldn't load the right of the model "+r)})}),e.transformChip=function(e){return angular.isObject(e)?e:{name:e,type:"new"}},e.error_msgs=[],e.chip_users=[],e.selectedItem=null,e.searchText=null,e.createFilterFor=function(e){var t=angular.lowercase(e);return function(e){return 0===e._lowername.indexOf(t)||0===e.id.toString().indexOf(t)}},e.querySearch=function(t){return t?e.users.filter(e.createFilterFor(t)):[]},e.cancelDialog=function(){t.hide()},e.submitDialog=function(){var o=0;if(e.error_msgs=[],1==e.rightRead&&(o|=spinalCore.right_flag.RD),1==e.rightWrite&&(o|=spinalCore.right_flag.WR),1==e.rightShare&&(o|=spinalCore.right_flag.AD),0==e.chip_users.length&&e.error_msgs.push("Add some user(s) to share."),0==o&&e.error_msgs.push("Choose the Right access to give."),0==e.error_msgs.length){var i=FileSystem._objects[r],n="";n=i.name?i.name.get():i.constructor.name+"_"+i._server_id;for(var l=0;l<e.chip_users.length;l++)a.share_model(i,n,o,e.chip_users[l].name);t.hide()}}},a.shareTemplate='<md-dialog aria-label="Sharing setting">  <md-dialog-content style="padding-left: 10px;padding-right: 10px;">        <h3>Sharing setting</h3>        <h5 style="margin-top: 30px;margin-bottom: 0px;">Invite people:</h5>        <md-chips ng-model="chip_users" md-autocomplete-snap md-transform-chip="transformChip($chip)" md-require-match="true">        <md-autocomplete md-selected-item="selectedItem" md-search-text="searchText" md-items="item in querySearch(searchText)"          md-item-text="item.name" placeholder="User(s) to share...">          <span md-highlight-text="searchText">{{item.id}} - {{item.name}}</span>        </md-autocomplete>        <md-chip-template>          <span>            <strong>{{$chip.name}}</strong>            <em>({{$chip.id}})</em>          </span>        </md-chip-template>     </md-chips>        <h5 style="margin-top: 30px;margin-bottom: 0px;">Who has access:</h5>      <md-table-container>        <table md-table>          <thead md-head>            <tr style="height: 25px;">              <th md-column>Id</th>              <th md-column style="width: 30%;">User</th>              <th md-column>Read</th>              <th md-column>Write</th>              <th md-column>Admin</th>            </tr>          </thead>          <tbody md-body>            <tr  md-select-id="name" ng-repeat="_user in selectedModelShared_to_user" file-obj="file">              <td md-cell>{{_user.id}}</td>              <td md-cell>{{_user.name}}</td>              <td md-cell>{{_user.rd}}</td>              <td md-cell>{{_user.wr}}</td>              <td md-cell>{{_user.ad}}</td>            </tr>          </tbody>        </table>      </md-table-container>        <h5 style="margin-top: 30px;margin-bottom: 0px;">Right access to give:</h5>    <md-input-container style="margin: 0;" class="md-block">        <md-switch class="md-primary" style="margin: 15px;" name="Read" ng-model="rightRead">          Read        </md-switch>        <md-switch class="md-primary" style="margin: 15px;" name="Write" ng-model="rightWrite">          Write        </md-switch>        <md-switch class="md-primary" style="margin: 15px;" name="Share" ng-model="rightShare">          Share        </md-switch>    </md-input-container> <p class="p-error fadein" ng-repeat="error_msg in error_msgs">{{error_msg}}</p>  </md-dialog-content>  <md-dialog-actions>    <md-button ng-click="cancelDialog()" class="md-primary">      Cancel    </md-button>    <md-button ng-click="submitDialog()" class="md-primary">      Submit    </md-button>  </md-dialog-actions></md-dialog>';var n=function(e){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"ShareFileExplorer","Share...",2,"share","Share Models with other Users"))}return i(n,a),t(n,[{key:"action",value:function(e){console.log(e);var t=e.scope.injector.get("spinalModelDictionary"),r=e.scope.injector.get("$mdDialog"),o=e.scope.injector.get("ngSpinalCore");r.show({controller:["$scope","$mdDialog","model_server_id","spinalModelDictionary","mdDialog","ngSpinalCore",a.DialogShareCtrl],template:a.shareTemplate,parent:angular.element(document.body),targetEvent:e.evt,clickOutsideToClose:!0,locals:{model_server_id:e.file._server_id,spinalModelDictionary:t,mdDialog:r,ngSpinalCore:o}})}}]),n}();module.exports.FileExplorerShare=n;var l=function(e){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"ShareFolderExplorer","Share...",3,"fa fa-share-alt","Share Models with other Users"))}return i(n,a),t(n,[{key:"action",value:function(e){var t=e.scope.injector.get("spinalModelDictionary"),r=e.scope.injector.get("$mdDialog"),o=e.scope.injector.get("ngSpinalCore");r.show({controller:["$scope","$mdDialog","model_server_id","spinalModelDictionary","mdDialog","ngSpinalCore",a.DialogShareCtrl],template:a.shareTemplate,parent:angular.element(document.body),clickOutsideToClose:!0,locals:{model_server_id:e.model_server_id,spinalModelDictionary:t,mdDialog:r,ngSpinalCore:o}})}}]),n}();module.exports.FolderExplorerShare=l;var s=function(e){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"ShareInspector","Share...",3,"share","Share Models with other Users"))}return i(n,a),t(n,[{key:"action",value:function(e){var t=e.scope.injector.get("spinalModelDictionary"),r=e.scope.injector.get("$mdDialog"),o=e.scope.injector.get("ngSpinalCore");r.show({controller:["$scope","$mdDialog","model_server_id","spinalModelDictionary","mdDialog","ngSpinalCore",a.DialogShareCtrl],template:a.shareTemplate,parent:angular.element(document.body),clickOutsideToClose:!0,locals:{model_server_id:e.model_server_id,spinalModelDictionary:t,mdDialog:r,ngSpinalCore:o}})}},{key:"is_shown",value:function(e){return!0}}]),n}();module.exports.InspectorShare=s,e._createClass=t,e._classCallCheck=r,e._possibleConstructorReturn=o,e._inherits=i,e.SpinalDrive_App_share=a,e.SpinalDrive_App_FileExplorer_share=n,e.SpinalDrive_App_FolderExplorer_share=l,e.SpinalDrive_App_Inspector_share=s}).call(window,window);

},{}],9:[function(require,module,exports){
(function(e){"use strict";var r=function(){function e(e,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,o,t){return o&&e(r.prototype,o),t&&e(r,t),r}}();function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function n(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var l=function(e){function l(){return o(this,l),t(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,"NewFolderFileExplorerCurrDir","New Folder...",1,"create_new_folder","Create a new Folder"))}return n(l,SpinalDrive_App),r(l,[{key:"action",value:function(e){var r=e.scope.injector.get("$mdDialog"),o=e.scope.injector.get("spinalFileSystem");console.log(e);var t=r.prompt().title("New Folder").placeholder("Untitled folder").ariaLabel("New Folder").initialValue("Untitled folder").clickOutsideToClose(!0).required(!0).ok("Create!").cancel("Cancel");e.original={model:e.model._server_id},r.show(t).then(function(r){o.newFolder(null,e,r)},function(){})}}]),l}();module.exports.FileExplorerCurrDirNewFolder=l;var i=function(e){function l(){return o(this,l),t(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,"NewFolderFolderExplorer","New Folder...",1,"fa fa-folder","Create a new Folder"))}return n(l,SpinalDrive_App),r(l,[{key:"action",value:function(e){var r=e.scope.injector.get("$mdDialog"),o=e.scope.injector.get("spinalFileSystem");console.log(e);var t=r.prompt().title("New Folder").placeholder("Untitled folder").ariaLabel("New Folder").clickOutsideToClose(!0).initialValue("Untitled folder").required(!0).ok("Create!").cancel("Cancel");r.show(t).then(function(r){o.newFolder(e.scope.all_dir,e.node,r)},function(){})}}]),l}();module.exports.FolderExplorerNewFolder=i,e._createClass=r,e._classCallCheck=o,e._possibleConstructorReturn=t,e._inherits=n,e.SpinalDrive_App_FileExplorer_currdir_newFolder=l,e.SpinalDrive_App_FolderExplorer_newFolder=i}).call(window,window);

},{}],10:[function(require,module,exports){
(function(e){"use strict";var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(e){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"RenameFileExplorer","Rename...",1,"edit","Rename a File"))}return o(i,SpinalDrive_App),t(i,[{key:"action",value:function(e){var t=e.scope.injector.get("$mdDialog"),n=(e.scope.injector.get("spinalFileSystem"),FileSystem._objects[e.file._server_id]),r=t.prompt().title("Rename").placeholder("File Name").ariaLabel("Rename").clickOutsideToClose(!0).required(!0).ok("Rename!").cancel("Cancel");n&&n.name&&n.name.get()&&r.initialValue(n.name.get()),t.show(r).then(function(t){if(n.name.get()!==t){for(var r=0;r<e.scope.curr_dir.length;r++)if(e.scope.curr_dir[r].name.get()===t){var o=e.scope.injector.get("$mdToast");return void o.show(o.simple().theme("error-toast").textContent("Error rename: File with this name already exist."))}n.name.set(t)}},function(){})}}]),i}();module.exports.FileExplorerRename=i,e._createClass=t,e._classCallCheck=n,e._possibleConstructorReturn=r,e._inherits=o,e.SpinalDrive_App_FileExplorer_rename=i}).call(window,window);

},{}],11:[function(require,module,exports){
"use strict";!function(){var e=require("./base/SpinalDrive_App_delete").FileExplorerDelete,r=require("./base/SpinalDrive_App_delete").FolderExplorerDelete;spinalDrive_Env.add_applications("FileExplorer",new e),spinalDrive_Env.add_applications("FolderExplorer",new r)}();

},{"./base/SpinalDrive_App_delete":5}],12:[function(require,module,exports){
"use strict";!function(){var i=require("./base/SpinalDrive_App_edit").InspectorEdit;spinalDrive_Env.add_applications("Inspector",new i)}();

},{"./base/SpinalDrive_App_edit":6}],13:[function(require,module,exports){
"use strict";!function(){var i=require("./base/SpinalDrive_App_issim.js").FileExplorerCurrDirIssim;spinalDrive_Env.add_applications("FileExplorerCurrDir",new i);var r=require("./base/SpinalDrive_App_issim.js").FileExplorerIssim;spinalDrive_Env.add_applications("FileExplorer",new r)}();

},{"./base/SpinalDrive_App_issim.js":7}],14:[function(require,module,exports){
"use strict";!function(){var r=require("./base/SpinalDrive_app_newFolder.js").FolderExplorerNewFolder;spinalDrive_Env.add_applications("FolderExplorer",new r);var e=require("./base/SpinalDrive_app_newFolder.js").FileExplorerCurrDirNewFolder;spinalDrive_Env.add_applications("FileExplorerCurrDir",new e)}();

},{"./base/SpinalDrive_app_newFolder.js":9}],15:[function(require,module,exports){
"use strict";!function(){var e=require("./base/SpinalDrive_app_renameFile.js").FileExplorerRename;spinalDrive_Env.add_applications("FileExplorer",new e)}();

},{"./base/SpinalDrive_app_renameFile.js":10}],16:[function(require,module,exports){
"use strict";!function(){var e=require("./base/SpinalDrive_App_share").FileExplorerShare;spinalDrive_Env.add_applications("FileExplorer",new e);var r=require("./base/SpinalDrive_App_share").FolderExplorerShare;spinalDrive_Env.add_applications("FolderExplorer",new r);var a=require("./base/SpinalDrive_App_share").InspectorShare;spinalDrive_Env.add_applications("Inspector",new a)}();

},{"./base/SpinalDrive_App_share":8}],17:[function(require,module,exports){
(function(e){"use strict";var r=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}();function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function n(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var i=function(e){function i(){t(this,i);var e=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"exportSvfFileExplorer","Create BIM Project",6,"dvr","Create BIM Project"));return e.order_priority=5,e}return n(i,SpinalDrive_App),r(i,[{key:"action",value:function(e){var r=e.scope.injector.get("$mdToast");if(e&&e.file&&e.file.name){var t='Starting to Export  "'+e.file.name+'" to svf';r.showSimple(t);var o=e.file.name.replace(/\.[^/.]+$/,"");console.log(o),console.log(e);var n=e.scope.curr_dir;if(n){for(var i=o.replace(/\([\d]*\)/g,""),l=0;n.has(o);)o=i+"("+l+")",l++;var a=FileSystem._objects[e.file._server_id];a&&(console.log(a),a.load(function(r){console.log(r);var t=/(?:\.([^.]+))?$/.exec(e.file.name)[1];n.add_file(o,0,{model_type:"BIM Project",rvt:new Ptr(r),ext:t})}))}}}},{key:"is_shown",value:function(e){if(e&&e.file&&e.file._server_id){var r=FileSystem._objects[e.file._server_id];if(r&&r instanceof File&&r._info.model_type&&"Path"===r._info.model_type.get())for(var t=/(?:\.([^.]+))?$/.exec(r.name.get())[1],o=["rvt","dwg","ifc"],n=0;n<o.length;n++)if(t===o[n])return!0}return!1}}]),i}();module.exports.FileExplorerExportSvf=i,e._createClass=r,e._classCallCheck=t,e._possibleConstructorReturn=o,e._inherits=n,e.SpinalDrive_App_FileExplorer_export_svf=i}).call(window,window);

},{}],18:[function(require,module,exports){
(function(e){"use strict";var t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(i){function l(){r(this,l);var e=n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,"OpenSvfFileExplorer","Open with BIM Viewer",6,"location_city","Open the BIM Viewer"));return e.order_priority=5,e}return o(l,SpinalDrive_App),t(l,[{key:"action",value:function(t){for(var r=t.scope.injector.get("authService"),n=t.scope.fs_path,o="/__users__/"+r.get_user().username,i=1;i<n.length;i++)o+="/"+n[i].name;o+="/"+t.file.name;var l=e.open("",""),a="/html/viewer-annotations/index.html#!/viewer/"+btoa(o);l.document.location=a,l.focus()}},{key:"is_shown",value:function(e){if(e&&e.file&&e.file._server_id){var t=FileSystem._objects[e.file._server_id];if(t&&t instanceof File&&t._info.model_type&&"BIM Project"===t._info.model_type.get())return!0}return!1}}]),l}();module.exports.FileExplorerSvfViewer=i,e._createClass=t,e._classCallCheck=r,e._possibleConstructorReturn=n,e._inherits=o,e.SpinalDrive_App_FileExplorer_svf_viewer=i}).call(window,window);

},{}],19:[function(require,module,exports){
"use strict";!function(){var i=require("./ExportSvf/SpinalDrive_App_export_svf.js").FileExplorerExportSvf;spinalDrive_Env.add_applications("FileExplorer",new i),spinalDrive_Env.context_file_exp_app_icon["BIM Project"]="location_city"}();

},{"./ExportSvf/SpinalDrive_App_export_svf.js":17}],20:[function(require,module,exports){
"use strict";!function(){var r=require("./ExportSvf/SpinalDrive_App_svf_viewer.js").FileExplorerSvfViewer;spinalDrive_Env.add_applications("FileExplorer",new r);var e=require("./ExportSvf/SpinalDrive_App_export_svf.js").FileExplorerExportSvf;spinalDrive_Env.add_applications("FileExplorer",new e)}();

},{"./ExportSvf/SpinalDrive_App_export_svf.js":17,"./ExportSvf/SpinalDrive_App_svf_viewer.js":18}]},{},[4,11,12,13,14,15,16,19,20])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi4uL3NwaW5hbC1lbnYtZHJpdmUtY29yZS9jb3JlL1NwaW5hbERyaXZlX0FwcC5qcyIsIi4uL3NwaW5hbC1lbnYtZHJpdmUtY29yZS9jb3JlL1NwaW5hbERyaXZlX0FwcF9saXN0LmpzIiwiLi4vc3BpbmFsLWVudi1kcml2ZS1jb3JlL2NvcmUvU3BpbmFsRHJpdmVfRW52LmpzIiwiLi4vc3BpbmFsLWVudi1kcml2ZS1jb3JlL21haW4uanMiLCIuLi9zcGluYWwtZW52LWRyaXZlLXBsdWdpbi1iYXNlL2Jhc2UvU3BpbmFsRHJpdmVfQXBwX2RlbGV0ZS5qcyIsIi4uL3NwaW5hbC1lbnYtZHJpdmUtcGx1Z2luLWJhc2UvYmFzZS9TcGluYWxEcml2ZV9BcHBfZWRpdC5qcyIsIi4uL3NwaW5hbC1lbnYtZHJpdmUtcGx1Z2luLWJhc2UvYmFzZS9TcGluYWxEcml2ZV9BcHBfaXNzaW0uanMiLCIuLi9zcGluYWwtZW52LWRyaXZlLXBsdWdpbi1iYXNlL2Jhc2UvU3BpbmFsRHJpdmVfQXBwX3NoYXJlLmpzIiwiLi4vc3BpbmFsLWVudi1kcml2ZS1wbHVnaW4tYmFzZS9iYXNlL1NwaW5hbERyaXZlX2FwcF9uZXdGb2xkZXIuanMiLCIuLi9zcGluYWwtZW52LWRyaXZlLXBsdWdpbi1iYXNlL2Jhc2UvU3BpbmFsRHJpdmVfYXBwX3JlbmFtZUZpbGUuanMiLCIuLi9zcGluYWwtZW52LWRyaXZlLXBsdWdpbi1iYXNlL3NwaW5hbGRyaXZlX2Vudl9kZWxldGUuanMiLCIuLi9zcGluYWwtZW52LWRyaXZlLXBsdWdpbi1iYXNlL3NwaW5hbGRyaXZlX2Vudl9lZGl0LmpzIiwiLi4vc3BpbmFsLWVudi1kcml2ZS1wbHVnaW4tYmFzZS9zcGluYWxkcml2ZV9lbnZfaXNzaW0uanMiLCIuLi9zcGluYWwtZW52LWRyaXZlLXBsdWdpbi1iYXNlL3NwaW5hbGRyaXZlX2Vudl9uZXdGb2xkZXIuanMiLCIuLi9zcGluYWwtZW52LWRyaXZlLXBsdWdpbi1iYXNlL3NwaW5hbGRyaXZlX2Vudl9yZW5hbWUuanMiLCIuLi9zcGluYWwtZW52LWRyaXZlLXBsdWdpbi1iYXNlL3NwaW5hbGRyaXZlX2Vudl9zaGFyZS5qcyIsIkV4cG9ydFN2Zi9TcGluYWxEcml2ZV9BcHBfZXhwb3J0X3N2Zi5qcyIsIkV4cG9ydFN2Zi9TcGluYWxEcml2ZV9BcHBfc3ZmX3ZpZXdlci5qcyIsInNwaW5hbGRyaXZlX2Vudl9leHBvcnRfc3ZmLmpzIiwic3BpbmFsZHJpdmVfZW52X3N2Zl92aWV3ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7aVhDSUUsSUFBQSxFQUFBLFdBU3dFLFNBQTVELElBQTRELElBQWpELEVBQWlELFVBQUEsT0FBQSxRQUFBLElBQUEsVUFBQSxHQUFBLFVBQUEsR0FBQSxHQUFyQyxFQUFxQyxVQUFBLE9BQUEsUUFBQSxJQUFBLFVBQUEsR0FBQSxVQUFBLEdBQUEsR0FBN0IsRUFBNkIsVUFBQSxPQUFBLFFBQUEsSUFBQSxVQUFBLEdBQUEsVUFBQSxHQUFBLEVBQWxCLEVBQUEsVUFBa0IsT0FBQSxRQUFBLElBQUEsVUFBQSxHQUFBLFVBQUEsR0FBQSx5RUFFdEUsS0FBSyxLQUFMLEVBQ0EsS0FBSyxNQUFMLEVBQ0EsS0FBSyxHQUFMLEVBQ0EsS0FBSyxLQUFBLEVBQ0wsS0FBSyxZQUFMLEVBQ0QsS0FBQSxlQUFBLHNFQWlCQyxNQUFBLFNBQUEsR0FFRCxLQUFBLE9BQUEscUJBU0MsTUFBQSxTQUFBLEdBQ0QsT0FBQSxRQTdDRCxHQWdERixFQUFBLFFBQWlCOzs7b1pDaERmLEVBQUEsV0FBYyxTQUFBLGNBRWIsS0FBQSx5Q0FHQyxNQUFBLFNBQTJCLEdBRTNCLFlBQUEsSUFBQSxFQUFBLFdBQUEsSUFBQSxFQUFBLFlBQUEsSUFBQSxFQUFBLFNBQUEsSUFBQSxFQUFBLFdBQUEsSUFBQSxFQUFBLDBCQVVBLE1BQUksU0FBZSxHQUNqQixHQUFBLGFBQWdCLEdBQWUsS0FBUSxhQUFLLEdBQUEsQ0FDMUMsSUFBQSxJQUFJLEVBQUssRUFB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aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcbiAqIGludGVyZmFjZSBvbiBhbiBhcHBcbiAqL1xuY2xhc3MgU3BpbmFsRHJpdmVfQXBwIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU3BpbmFsRHJpdmVfQXBwLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdIFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsXSBcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtpZF0gXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbaWNvbl0gXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZGVzY3JpcHRpb25dIFxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwXG4gICAqL1xuICBjb25zdHJ1Y3RvcihuYW1lID0gXCJcIiwgbGFiZWwgPSBcIlwiLCBpZCA9IDAsIGljb24gPSBcIlwiLCBkZXNjcmlwdGlvbiA9IFwiXCIpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5pY29uID0gaWNvbjtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5vcmRlcl9wcmlvcml0eSA9IDA7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZXIgdG8gdGhlIGNhbGxiYWNrIG9uIGNsaWNrLlxuICAgKiBNZXRob2QgdG8gYmUgT3ZlcnJpZGRlbiBpbiBjaGlsZFxuICAgKiBcbiAgICogQHBhcmFtIHthbnl9IHBhcmFtcyBcbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcFxuICAgKi9cbiAgYWN0aW9uKHBhcmFtcykge31cblxuICAvKipcbiAgICogTWV0aG9kIGNhbGxlZCBvbmNsaWNrIHdpbGwgY2FsbCB0aGlzLmFjdGlvbiBpbnNpZGVcbiAgICogXG4gICAqIEBwYXJhbSB7YW55fSBwYXJhbXMgXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBcbiAgICovXG4gIGxhdW5jaF9hY3Rpb24ocGFyYW1zKSB7XG4gICAgLy8gdGhpcy5sb2cocGFyYW1zKTtcbiAgICB0aGlzLmFjdGlvbihwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIG1ldGhvZCB0byBrbm93IGlmIHRoZSBhcHAgaXMgbmVlZGVkIHRvIGJlIHNob3duLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZCBvYmplY3QgcmVwcmVzZW50aW5nIHNlbGVjdGlvbiBcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHJldHVybiB0cnVlIGlmIG5lZWQgdG8gYmUgc2hvd247XG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBcbiAgICovXG4gIGlzX3Nob3duKGQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuU3BpbmFsRHJpdmVfQXBwLlNldExvZyA9IGZhbHNlO1xubW9kdWxlLmV4cG9ydHMgPSBTcGluYWxEcml2ZV9BcHA7IiwibGV0IFNwaW5hbERyaXZlX0FwcCA9IHJlcXVpcmUoXCIuL1NwaW5hbERyaXZlX0FwcFwiKTtcblxuLyoqIENsYXNzIHJlcHJlc2VudGluZyBhIGxpc3Qgb2YgYXBwbGljYXRpb25zIHVuaXF1ZSAqL1xuY2xhc3MgU3BpbmFsRHJpdmVfQXBwX2xpc3Qge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9saXN0ID0gW107XG4gIH1cblxuICBpc192YWxpZF9vYmoob2JqKSB7XG4gICAgcmV0dXJuICh0eXBlb2Ygb2JqLm5hbWUgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG9iai5sYWJlbCAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygb2JqLmlkICE9ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygb2JqLmljb24gIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG9iai5kZXNjcmlwdGlvbiAhPSAndW5kZWZpbmVkJyk7XG4gICAgLy8gJiYgdHlwZW9mIG9iai5hcHBHcm91cCAhPSAndW5kZWZpbmVkJyAmJlxuICAgIC8vIHR5cGVvZiBvYmouZXh0ZW5zaW9ucyAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygb2JqLnR5cGVzICE9ICd1bmRlZmluZWQnXG4gIH1cbiAgLyoqXG4gICAqIFxuICAgKiBcbiAgICogQHBhcmFtIHsoU3BpbmFsRHJpdmVfQXBwfGFueSl9IG9iaiBcbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9saXN0XG4gICAqL1xuICBwdXNoKG9iaikge1xuICAgIGlmIChvYmogaW5zdGFuY2VvZiBTcGluYWxEcml2ZV9BcHAgfHwgdGhpcy5pc192YWxpZF9vYmoob2JqKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh0aGlzLl9saXN0W2ldLm5hbWUgPT09IG9iai5uYW1lKSB7XG4gICAgICAgICAgdGhpcy5fbGlzdFtpXSA9IG9iajtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2xpc3QucHVzaChvYmopO1xuICAgIH0gZWxzZVxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHRyeWluZyB0byBQdXNoIG5vdCBhIFNwaW5hbERyaXZlX0FwcCBPYmplY3Qgb3IgZXF1aXZhbGVudC5cIik7XG4gIH1cbiAgLyoqXG4gICAqIFxuICAgKiBcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBmYWxzZSBpZiBub3RoaW5nIHRvIGRlbGV0ZVxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX2xpc3RcbiAgICovXG4gIHJlbW92ZV9ieV9uYW1lKG5hbWUpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAobmFtZSA9PT0gdGhpcy5fbGlzdFtpXS5uYW1lKSB7XG4gICAgICAgICAgdGhpcy5fbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBcbiAgICogXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCBcbiAgICogQHJldHVybnMge1NwaW5hbERyaXZlX0FwcH1cbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9saXN0XG4gICAqL1xuICByZW1vdmVfYnlfaWQoaWQpIHtcbiAgICBpZiAodHlwZW9mIGlkICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlkID09PSB0aGlzLl9saXN0W2ldLmlkKSB7XG4gICAgICAgICAgdGhpcy5fbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBcbiAgICogXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZHggXG4gICAqIEByZXR1cm5zIHtTcGluYWxEcml2ZV9BcHB9XG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfbGlzdFxuICAgKi9cbiAgZ2V0KGlkeCkge1xuICAgIGlmICh0eXBlb2YgaWR4ID09PSAndW5kZWZpbmVkJylcbiAgICAgIHJldHVybiB0aGlzLl9saXN0W2lkeF07XG4gICAgcmV0dXJuIHRoaXMuX2xpc3Q7XG4gIH1cbiAgLyoqXG4gICAqIFxuICAgKiBcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9saXN0XG4gICAqL1xuICBsZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpc3QubGVuZ3RoO1xuICB9XG4gIC8qKlxuICAgKiBcbiAgICogXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICAgKiBAcmV0dXJucyB7U3BpbmFsRHJpdmVfQXBwfSByZXR1cm5zIDAgb24gbm90Zm91bmQuXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfbGlzdFxuICAgKi9cbiAgZ2V0X2J5X25hbWUobmFtZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKG5hbWUgPT09IHRoaXMuX2xpc3RbaV0ubmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdFtpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTcGluYWxEcml2ZV9BcHBfbGlzdDsiLCJ2YXIgU3BpbmFsRHJpdmVfQXBwID0gcmVxdWlyZSgnLi9TcGluYWxEcml2ZV9BcHAnKTtcbnZhciBTcGluYWxEcml2ZV9BcHBfbGlzdCA9IHJlcXVpcmUoJy4vU3BpbmFsRHJpdmVfQXBwX2xpc3QnKTtcblxuLyoqIENsYXNzIHJlcHJlc2VudGluZyB0aGUgU3BpbmFsRHJpdmUgRW52aXJvbm5lbWVudCAqL1xuY2xhc3MgU3BpbmFsRHJpdmVfRW52IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU3BpbmFsRHJpdmVfRW52LlxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfRW52XG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lckxzdCA9IHt9O1xuICAgIHRoaXMuY29udGV4dF9maWxlX2V4cF9hcHBfaWNvbiA9IHtcbiAgICAgIERpcmVjdG9yeTogJ2ZvbGRlcicsXG4gICAgICBTZXNzaW9uOiAnZGVza3RvcF93aW5kb3dzJyxcbiAgICAgIGRlZmF1bHQ6ICdpbnNlcnRfZHJpdmVfZmlsZSdcbiAgICB9O1xuXG4gIH1cbiAgLyoqXG4gICAqIGFkZF9uYXZiYXJfYXBwbGljYXRpb24uXG4gICAqIFxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IGtleSBzdHJpbmcgb2YgdGhlIGxheWVyOiBgRm9sZGVyRXhwbG9yZXJgIG9yICdGaWxlRXhwbG9yZXInIG9yIGBJbnNwZWN0b3JgIG9yIGBGaWxlRXhwbG9yZXJDdXJyRGlyYFxuICAgKiBAcGFyYW0ge1NwaW5hbERyaXZlX0FwcCB8IGFueX0gYXBwIHNob3VsZCBiZSBhbiBTcGluYWxEcml2ZV9BcHBcbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0VudlxuICAgKi9cbiAgYWRkX2FwcGxpY2F0aW9ucyhrZXksIGFwcCkge1xuICAgIGlmICghdGhpcy5jb250YWluZXJMc3Rba2V5XSlcbiAgICAgIHRoaXMuY29udGFpbmVyTHN0W2tleV0gPSBuZXcgU3BpbmFsRHJpdmVfQXBwX2xpc3QoKTtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXJMc3Rba2V5XS5wdXNoKGFwcCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBnZXRfYXBwbGljYXRpb25zXG4gICAqIFxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IGtleSBzdHJpbmcgb2YgdGhlIGxheWVyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkIGRiamVjdCBzZW5kIHRvIGlzX3Nob3duIGRlZmluZWQgYnkgZWFjaCBsYXlvdXRcbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0VudlxuICAgKi9cbiAgZ2V0X2FwcGxpY2F0aW9ucyhrZXksIGQpIHtcbiAgICBpZiAoIXRoaXMuY29udGFpbmVyTHN0W2tleV0pXG4gICAgICB0aGlzLmNvbnRhaW5lckxzdFtrZXldID0gbmV3IFNwaW5hbERyaXZlX0FwcF9saXN0KCk7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyTHN0W2tleV0uX2xpc3QuZmlsdGVyKChhcHApID0+IHtcbiAgICAgIHJldHVybiBhcHAuaXNfc2hvd24oZCk7XG4gICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGEub3JkZXJfcHJpb3JpdHkgPCBiLm9yZGVyX3ByaW9yaXR5O1xuICAgIH0pO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IFNwaW5hbERyaXZlX0VudjsiLCIhZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9cmVxdWlyZShcIi4vY29yZS9TcGluYWxEcml2ZV9FbnZcIiksbj1uZXcgaTttb2R1bGUuZXhwb3J0cz1uLGUuU3BpbmFsRHJpdmVfRW52PWksZS5zcGluYWxEcml2ZV9FbnY9bn0od2luZG93KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkltMWhhVzR1YW5NaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWlJc0ltWnBiR1VpT2lJdmFHOXRaUzl0WW1GeVlXUnFhUzlFWlhOcmRHOXdMM053YVc1aGJDMWljbTkzYzJWeUwzTndhVzVoYkMxaWNtOTNjMlZ5TFhacFpYZGxjaTFoYm01dmRHRjBhVzl1Y3k5dWIyUmxYMjF2WkhWc1pYTXZjM0JwYm1Gc0xXVnVkaTFrY21sMlpTMWpiM0psTDIxaGFXNHVhbk1pTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2VzExOSIsIi8qKlxuICogU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9kZWxldGVcbiAqIEBleHRlbmRzIHtTcGluYWxEcml2ZV9BcHB9XG4gKi9cbmNsYXNzIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfZGVsZXRlIGV4dGVuZHMgU3BpbmFsRHJpdmVfQXBwIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2RlbGV0ZS5cbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfZGVsZXRlXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIkRlbGVsZUZpbGVFeHBsb3JlclwiLCBcIkRlbGV0ZVwiLCAxLCBcImRlbGV0ZVwiLCBcIkRlbGV0ZSB0aGUgZmlsZVwiKTtcbiAgICB0aGlzLm9yZGVyX3ByaW9yaXR5ID0gLTE7XG4gICAgLy8gc3VwZXIoXCJEZWxlbGVGaWxlRXhwbG9yZXJcIiwgXCJEZWxldGVcIiwgMSwgXCJkZWxldGVcIiwgXCJEZWxldGUgdGhlIGZpbGVcIiwgXCJkZWxldGVcIiwgW1wiYWxsXCJdLCBcImFsbFwiKTtcbiAgfVxuICAvKipcbiAgICogbWV0aG9kIHRvIGhhbmRsZSB0aGUgc2VsZWN0aW9uXG4gICAqIFxuICAgKiBAcGFyYW0ge2FueX0gZWxlbWVudCBcbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfZGVsZXRlXG4gICAqL1xuICBhY3Rpb24ob2JqKSB7XG4gICAgbGV0IG1kRGlhbG9nID0gb2JqLnNjb3BlLmluamVjdG9yLmdldCgnJG1kRGlhbG9nJyk7XG4gICAgbGV0IGNvbnRlbnQgPSAnQXJlIHlvdSBzdXJlIHRvIGRlbGV0ZSB0aGUgZmlsZSAvIGZvbGRlcic7XG4gICAgaWYgKG9iaiAmJiBvYmouZmlsZSAmJiBvYmouZmlsZS5uYW1lKVxuICAgICAgY29udGVudCArPSBcIiA6IFwiICsgb2JqLmZpbGUubmFtZTtcbiAgICBsZXQgbmV3Rm9sZGVyX3Byb21wdCA9IG1kRGlhbG9nLmNvbmZpcm0oKVxuICAgICAgLnRpdGxlKFwiRGVsZXRlXCIpXG4gICAgICAudGV4dENvbnRlbnQoY29udGVudClcbiAgICAgIC5hcmlhTGFiZWwoJ0RlbGV0ZSBEaXJlY3RvcnkgZmlsZScpXG4gICAgICAuY2xpY2tPdXRzaWRlVG9DbG9zZSh0cnVlKVxuICAgICAgLm9rKCdDb25maXJtJylcbiAgICAgIC5jYW5jZWwoJ0NhbmNlbCcpO1xuXG4gICAgbWREaWFsb2cuc2hvdyhuZXdGb2xkZXJfcHJvbXB0KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghKG9iaiAmJiBvYmouc2NvcGUgJiYgb2JqLnNjb3BlLmN1cnJfZGlyICYmIG9iai5maWxlICYmIG9iai5maWxlLl9zZXJ2ZXJfaWQpKSByZXR1cm47XG4gICAgICBsZXQgZiA9IEZpbGVTeXN0ZW0uX29iamVjdHNbb2JqLmZpbGUuX3NlcnZlcl9pZF07XG4gICAgICBpZiAoZikge1xuICAgICAgICBsZXQgbV9wYXJlbnQgPSBvYmouc2NvcGUuY3Vycl9kaXI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbV9wYXJlbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAobV9wYXJlbnRbaV0uX3NlcnZlcl9pZCA9PSBmLl9zZXJ2ZXJfaWQgJiYgb2JqLmZpbGUubmFtZSA9PSBtX3BhcmVudFtpXS5uYW1lLmdldCgpKSB7XG4gICAgICAgICAgICBtX3BhcmVudC5yZW1vdmVfcmVmKG1fcGFyZW50W2ldKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uICgpIHt9KTtcblxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzLkZpbGVFeHBsb3JlckRlbGV0ZSA9IFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfZGVsZXRlO1xuXG5cbi8qKlxuICogU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX2RlbGV0ZVxuICogQGV4dGVuZHMge1NwaW5hbERyaXZlX0FwcH1cbiAqL1xuY2xhc3MgU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX2RlbGV0ZSBleHRlbmRzIFNwaW5hbERyaXZlX0FwcCB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX2RlbGV0ZS5cbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9Gb2xkZXJFeHBsb3Jlcl9kZWxldGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiRGVsZWxlRm9sZGVyRXhwbG9yZXJcIiwgXCJEZWxldGVcIiwgMCwgXCJmYSBmYS10cmFzaCB0ZXh0LWRhbmdlclwiLCBcIkRlbGV0ZSB0aGUgZmlsZVwiKTtcbiAgICAvLyBzdXBlcihcIkRlbGVsZUZvbGRlckV4cGxvcmVyXCIsIFwiRGVsZXRlXCIsIDAsIFwiZmEgZmEtdHJhc2ggdGV4dC1kYW5nZXJcIiwgXCJEZWxldGUgdGhlIGZpbGVcIiwgXCJkZWxldGVcIiwgW1wiYWxsXCJdLCBcImFsbFwiKTtcbiAgfVxuICAvKipcbiAgICogbWV0aG9kIHRvIGhhbmRsZSB0aGUgc2VsZWN0aW9uXG4gICAqIFxuICAgKiBAcGFyYW0ge2FueX0gZWxlbWVudCBcbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9Gb2xkZXJFeHBsb3Jlcl9kZWxldGVcbiAgICovXG4gIGFjdGlvbihvYmopIHtcbiAgICBsZXQgbWREaWFsb2cgPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCckbWREaWFsb2cnKTtcbiAgICBsZXQgc3BpbmFsRmlsZVN5c3RlbSA9IG9iai5zY29wZS5pbmplY3Rvci5nZXQoJ3NwaW5hbEZpbGVTeXN0ZW0nKTtcblxuICAgIGxldCBjb250ZW50ID0gJ0FyZSB5b3Ugc3VyZSB0byBkZWxldGUgdGhlIGZvbGRlcic7XG4gICAgaWYgKG9iaiAmJiBvYmoubm9kZSAmJiBvYmoubm9kZS50ZXh0KVxuICAgICAgY29udGVudCArPSBcIiA6IFwiICsgb2JqLm5vZGUudGV4dDtcbiAgICBsZXQgbmV3Rm9sZGVyX3Byb21wdCA9IG1kRGlhbG9nLmNvbmZpcm0oKVxuICAgICAgLnRpdGxlKFwiRGVsZXRlXCIpXG4gICAgICAudGV4dENvbnRlbnQoY29udGVudClcbiAgICAgIC5hcmlhTGFiZWwoJ0RlbGV0ZSBEaXJlY3RvcnkgZmlsZScpXG4gICAgICAuY2xpY2tPdXRzaWRlVG9DbG9zZSh0cnVlKVxuICAgICAgLm9rKCdDb25maXJtJylcbiAgICAgIC5jYW5jZWwoJ0NhbmNlbCcpO1xuXG4gICAgbWREaWFsb2cuc2hvdyhuZXdGb2xkZXJfcHJvbXB0KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHNwaW5hbEZpbGVTeXN0ZW0uZGVsZXRlRm9sZGVyKG9iai5zY29wZS5hbGxfZGlyLCBvYmoubm9kZSk7XG4gICAgfSwgZnVuY3Rpb24gKCkge30pO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cy5Gb2xkZXJFeHBsb3JlckRlbGV0ZSA9IFNwaW5hbERyaXZlX0FwcF9Gb2xkZXJFeHBsb3Jlcl9kZWxldGU7IiwiLyoqXG4gKiBTcGluYWxEcml2ZV9BcHBfRWRpdFxuICogQGV4dGVuZHMge1NwaW5hbERyaXZlX0FwcH1cbiAqL1xuY2xhc3MgU3BpbmFsRHJpdmVfQXBwX0VkaXQgZXh0ZW5kcyBTcGluYWxEcml2ZV9BcHAge31cbi8qKlxuICogRGlhbG9nRWRpdEN0cmwgLSBjb250cm9sbGVyIHRvIGJlIGFkZGVkIHdpdGhpbiBhIGAkbWREaWFsb2cuc2hvd2Agb3B0aW9uIHBhcmFtZXRlci5cbiAqICBlLmcuIHtjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCIkbWREaWFsb2dcIiwgXCJtb2RlbF9zZXJ2ZXJfaWRcIiwgXCJzcGluYWxNb2RlbERpY3Rpb25hcnlcIiwgXCJtZERpYWxvZ1wiLCBcIm5nU3BpbmFsQ29yZVwiLERpYWxvZ0VkaXRDdHJsXSwgdGVtcGxhdGU6IHNoYXJlVGVtcGxhdGUsIC4uLiAsIGxvY2FsczpcbiAqIHttb2RlbF9zZXJ2ZXJfaWQ6IG9iaixzcGluYWxNb2RlbERpY3Rpb25hcnk6IHNwaW5hbE1vZGVsRGljdGlvbmFyeSwgbWREaWFsb2c6IG1kRGlhbG9nLCBuZ1NwaW5hbENvcmU6IG5nU3BpbmFsQ29yZX1cbiAqIH1cbiAqIEBwYXJhbSB7YW55fSAkc2NvcGUgYXV0b21hdGljbHkgZ2l2ZW4gaW4gdGhlIG1kRGlhbG9nLnNob3dcbiAqIEBwYXJhbSB7YW5ndWxhcn0gJG1kRGlhbG9nIGF1dG9tYXRpY2x5IGdpdmVuIGluIHRoZSBtZERpYWxvZy5zaG93XG4gKiBAcGFyYW0ge251bWJlcn0gbW9kZWxfc2VydmVyX2lkIHJlc29sdmVkIHdpdGhpbiB0aGUgYGxvY2FsYCBvYmplY3QgZ2l2ZW4gdG8gdGhlICRtZERpYWxvZy5zaG93KC4uLilcbiAqIEBwYXJhbSB7YW5ndWxhckZhY3Rvcnl9IHNwaW5hbE1vZGVsRGljdGlvbmFyeSBzYW1lXG4gKiBAcGFyYW0ge2FuZ3VsYXJGYWN0b3J5fSBtZERpYWxvZyBzYW1lXG4gKiBAcGFyYW0ge2FuZ3VsYXJGYWN0b3J5fSBuZ1NwaW5hbENvcmUgc2FtZVxuICovXG5TcGluYWxEcml2ZV9BcHBfRWRpdC5EaWFsb2dFZGl0Q3RybCA9IGZ1bmN0aW9uICgkc2NvcGUsICRtZERpYWxvZywgbW9kZWxfc2VydmVyX2lkLCBzcGluYWxNb2RlbERpY3Rpb25hcnksIG1kRGlhbG9nLCBuZ1NwaW5hbENvcmUpIHtcbiAgbGV0IG1vZCA9IEZpbGVTeXN0ZW0uX29iamVjdHNbbW9kZWxfc2VydmVyX2lkXTtcbiAgJHNjb3BlLmVkaXRNb2RlbCA9IG1vZDtcbiAgJHNjb3BlLm1vZGVsRGF0YSA9IG1vZC5nZXQoKTtcbiAgJHNjb3BlLmVkaXRNb2RlbENvbnRydWN0ID0gbW9kLmNvbnN0cnVjdG9yLm5hbWU7XG4gICRzY29wZS5lZGl0Rm9ybSA9IHt9O1xuXG4gICRzY29wZS5jYW5jZWxEaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgJG1kRGlhbG9nLmhpZGUoKTtcbiAgfTtcblxuICAkc2NvcGUuc3VibWl0RGlhbG9nID0gZnVuY3Rpb24gKCkge1xuICAgIG1vZC5zZXQoJHNjb3BlLmVkaXRGb3JtLm1vZGVsRGF0YS4kbW9kZWxWYWx1ZSk7XG4gICAgJG1kRGlhbG9nLmhpZGUoKTtcbiAgfTtcbiAgJHNjb3BlLmlzU3RyID0gKG0pID0+IHtcbiAgICByZXR1cm4gbSBpbnN0YW5jZW9mIFN0cjtcbiAgfTtcbiAgJHNjb3BlLmlzVmFsID0gKG0pID0+IHtcbiAgICByZXR1cm4gbSBpbnN0YW5jZW9mIFZhbDtcbiAgfTtcbiAgJHNjb3BlLmlzQm9vbCA9IChtKSA9PiB7XG4gICAgcmV0dXJuIG0gaW5zdGFuY2VvZiBCb29sO1xuICB9O1xufTtcblxuU3BpbmFsRHJpdmVfQXBwX0VkaXQuRWRpdFRlbXBsYXRlID0gJzxtZC1kaWFsb2cgYXJpYS1sYWJlbD1cIlNoYXJpbmcgc2V0dGluZ1wiPicgK1xuICAnICA8bWQtZGlhbG9nLWNvbnRlbnQgc3R5bGU9XCJwYWRkaW5nLWxlZnQ6IDEwcHg7cGFkZGluZy1yaWdodDogMTBweDtcIj4nICtcbiAgJyAgICAgICAgPGgzPkVkaXQgU2V0dGluZzwvaDM+JyArXG4gICcgICAgICAgIDxoNSBzdHlsZT1cIm1hcmdpbi10b3A6IDMwcHg7bWFyZ2luLWJvdHRvbTogMzVweDtcIj5UeXBlOiB7e2VkaXRNb2RlbENvbnRydWN0fX08L2g1PicgK1xuICAnPGZvcm0gbmFtZT1cImVkaXRGb3JtXCIgbmctc3VibWl0PVwic3VibWl0RGlhbG9nKClcIj4nICtcbiAgJyAgICA8bWQtaW5wdXQtY29udGFpbmVyIG5nLWlmPVwiaXNTdHIoZWRpdE1vZGVsKVwiIHN0eWxlPVwibWFyZ2luOiAwO1wiIGNsYXNzPVwibWQtYmxvY2tcIj4nICtcbiAgJyAgICAgIDxsYWJlbD5EYXRhPC9sYWJlbD4nICtcbiAgJyAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm1vZGVsRGF0YVwiIG5hbWU9XCJtb2RlbERhdGFcIiBtZC1hdXRvZm9jdXM+JyArXG4gICcgICAgPC9tZC1pbnB1dC1jb250YWluZXI+JyArXG4gICcgICAgPG1kLWlucHV0LWNvbnRhaW5lciBuZy1pZj1cImlzVmFsKGVkaXRNb2RlbClcIiBzdHlsZT1cIm1hcmdpbjogMDtcIiBjbGFzcz1cIm1kLWJsb2NrXCI+JyArXG4gICcgICAgICA8bGFiZWw+RGF0YTwvbGFiZWw+JyArXG4gICcgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5hbWU9XCJtb2RlbERhdGFcIiAgbmctbW9kZWw9XCJtb2RlbERhdGFcIiBtZC1hdXRvZm9jdXM+JyArXG4gICcgICAgPC9tZC1pbnB1dC1jb250YWluZXI+JyArXG4gICcgICAgPG1kLWlucHV0LWNvbnRhaW5lciBuZy1pZj1cImlzQm9vbChlZGl0TW9kZWwpXCJzdHlsZT1cIm1hcmdpbjogMDtcIiBjbGFzcz1cIm1kLWJsb2NrXCI+JyArXG4gICcgICAgICA8bGFiZWw+RGF0YTwvbGFiZWw+JyArXG4gICcgICAgICA8bWQtc2VsZWN0IG5hbWU9XCJtb2RlbERhdGFcIm5nLW1vZGVsPVwibW9kZWxEYXRhXCIgbWQtYXV0b2ZvY3VzPicgK1xuICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPXRydWU+dHJ1ZTwvbWQtb3B0aW9uPicgK1xuICAnICAgICAgICA8bWQtb3B0aW9uIHZhbHVlPWZhbHNlPmZhbHNlPC9tZC1vcHRpb24+JyArXG4gICcgICAgICA8L21kLXNlbGVjdD4nICtcbiAgJyAgICA8L21kLWlucHV0LWNvbnRhaW5lcj4nICtcbiAgJyA8cCBjbGFzcz1cInAtZXJyb3IgZmFkZWluXCIgbmctcmVwZWF0PVwiZXJyb3JfbXNnIGluIGVycm9yX21zZ3NcIj57e2Vycm9yX21zZ319PC9wPicgK1xuICAnICA8L21kLWRpYWxvZy1jb250ZW50PicgK1xuICAnICA8bWQtZGlhbG9nLWFjdGlvbnM+JyArXG4gICcgICAgPG1kLWJ1dHRvbmdmbmdmIG5nLWNsaWNrPVwiY2FuY2VsRGlhbG9nKClcIiBjbGFzcz1cIm1kLXByaW1hcnlcIj4nICtcbiAgJyAgICAgIENhbmNlbCcgK1xuICAnICAgIDwvbWQtYnV0dG9uPicgK1xuICAnICAgIDxtZC1idXR0b24gbmctY2xpY2s9XCJzdWJtaXREaWFsb2coKVwiIGNsYXNzPVwibWQtcHJpbWFyeVwiPicgK1xuICAnICAgICAgU3VibWl0JyArXG4gICcgICAgPC9tZC1idXR0b24+JyArXG4gICcgIDwvbWQtZGlhbG9nLWFjdGlvbnM+JyArXG4gICc8L21kLWRpYWxvZz4nO1xuXG5cbi8qKlxuICogU3BpbmFsRHJpdmVfQXBwX0luc3BlY3Rvcl9lZGl0XG4gKiBAZXh0ZW5kcyB7U3BpbmFsRHJpdmVfQXBwX0VkaXR9XG4gKi9cbmNsYXNzIFNwaW5hbERyaXZlX0FwcF9JbnNwZWN0b3JfZWRpdCBleHRlbmRzIFNwaW5hbERyaXZlX0FwcF9FZGl0IHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTcGluYWxEcml2ZV9BcHBfSW5zcGVjdG9yX2VkaXQuXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfSW5zcGVjdG9yX2VkaXRcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiRWRpdEluc3BlY3RvclwiLCBcIkVkaXQuLi5cIiwgMywgXCJlZGl0XCIsIFwiRWRpdCBBdG9taWMgTW9kZWxzLi4uXCIpO1xuICAgIC8vIHN1cGVyKFwiRWRpdEluc3BlY3RvclwiLCBcIkVkaXQuLi5cIiwgMywgXCJlZGl0XCIsIFwiRWRpdCBBdG9taWMgTW9kZWxzLi4uXCIsIFwiZWRpdFwiLCBbXCJhbGxcIl0sIFwiYWxsXCIpO1xuICB9XG4gIC8qKlxuICAgKiBtZXRob2QgdG8gaGFuZGxlIHRoZSBzZWxlY3Rpb25cbiAgICogXG4gICAqIEBwYXJhbSB7YW55fSBlbGVtZW50IFxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0luc3BlY3Rvcl9lZGl0XG4gICAqL1xuICBhY3Rpb24ob2JqKSB7XG4gICAgbGV0IHNwaW5hbE1vZGVsRGljdGlvbmFyeSA9IG9iai5zY29wZS5pbmplY3Rvci5nZXQoJ3NwaW5hbE1vZGVsRGljdGlvbmFyeScpO1xuICAgIGxldCBtZERpYWxvZyA9IG9iai5zY29wZS5pbmplY3Rvci5nZXQoJyRtZERpYWxvZycpO1xuICAgIGxldCBuZ1NwaW5hbENvcmUgPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCduZ1NwaW5hbENvcmUnKTtcblxuICAgIG1kRGlhbG9nLnNob3coe1xuICAgICAgYXJpYUxhYmVsOiAnRWRpdCcsXG4gICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCIkbWREaWFsb2dcIiwgXCJtb2RlbF9zZXJ2ZXJfaWRcIiwgXCJzcGluYWxNb2RlbERpY3Rpb25hcnlcIiwgXCJtZERpYWxvZ1wiLCBcIm5nU3BpbmFsQ29yZVwiLCBTcGluYWxEcml2ZV9BcHBfRWRpdC5EaWFsb2dFZGl0Q3RybF0sXG4gICAgICB0ZW1wbGF0ZTogU3BpbmFsRHJpdmVfQXBwX0VkaXQuRWRpdFRlbXBsYXRlLFxuICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlLFxuICAgICAgbG9jYWxzOiB7XG4gICAgICAgIG1vZGVsX3NlcnZlcl9pZDogb2JqLm1vZGVsX3NlcnZlcl9pZCxcbiAgICAgICAgc3BpbmFsTW9kZWxEaWN0aW9uYXJ5OiBzcGluYWxNb2RlbERpY3Rpb25hcnksXG4gICAgICAgIG1kRGlhbG9nOiBtZERpYWxvZyxcbiAgICAgICAgbmdTcGluYWxDb3JlOiBuZ1NwaW5hbENvcmVcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBtZXRob2QgdG8ga25vdyBpZiB0aGUgYXBwIGlzIG5lZWRlZCB0byBiZSBzaG93bi5cbiAgICogaWYgdGhlIG1ldGhvZCBpcyBub3QgZGVmaW5lZCB0aGVuIHRoZSBtb2RlbCBpcyBzaG93biBieSBkZWZhdWx0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkIG5vZGUgb2YgdGhlIHRyZWUgc2VsZWN0aW9ubmVkXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0luc3BlY3Rvcl9lZGl0XG4gICAqL1xuICBpc19zaG93bihkKSB7XG4gICAgaWYgKGQgJiYgZC5kYXRhICYmIGQuZGF0YS5fc2VydmVyX2lkKSB7XG4gICAgICBsZXQgbSA9IEZpbGVTeXN0ZW0uX29iamVjdHNbZC5kYXRhLl9zZXJ2ZXJfaWRdO1xuICAgICAgaWYgKG0pIHtcbiAgICAgICAgcmV0dXJuIChtIGluc3RhbmNlb2YgVmFsIHx8IG0gaW5zdGFuY2VvZiBCb29sIHx8IG0gaW5zdGFuY2VvZiBTdHIpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzLkluc3BlY3RvckVkaXQgPSBTcGluYWxEcml2ZV9BcHBfSW5zcGVjdG9yX2VkaXQ7IiwiLyoqXG4gKiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2N1cnJkaXJfaXNzaW1cbiAqIEBleHRlbmRzIHtTcGluYWxEcml2ZV9BcHB9XG4gKi9cbmNsYXNzIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfY3VycmRpcl9pc3NpbSBleHRlbmRzIFNwaW5hbERyaXZlX0FwcCB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX2lzc2ltLlxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX2lzc2ltXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIklzc2ltRmlsZUV4cGxvcmVyQ3VyckRpclwiLCBcIk5ldyBJcydzaW0gYXBwXCIsIDEsIFwiZGVza3RvcF93aW5kb3dzXCIsIFwiQ3JlYXRlIGFuIElzJ3NpbSBhcHBcIik7XG4gIH1cbiAgLyoqXG4gICAqIG1ldGhvZCB0byBoYW5kbGUgdGhlIHNlbGVjdGlvblxuICAgKiBcbiAgICogQHBhcmFtIHthbnl9IGVsZW1lbnQgXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2N1cnJkaXJfaXNzaW1cbiAgICovXG4gIGFjdGlvbihvYmopIHtcbiAgICBsZXQgbWREaWFsb2cgPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCckbWREaWFsb2cnKTtcblxuICAgIHZhciBjb25maXJtID0gbWREaWFsb2cucHJvbXB0KClcbiAgICAgIC50aXRsZSgnTmV3IElzXFwnc2ltIHNlc3Npb24gUHJvamVjdCcpXG4gICAgICAucGxhY2Vob2xkZXIoJ1Byb2plY3Qgc2Vzc2lvbiBuYW1lJylcbiAgICAgIC5hcmlhTGFiZWwoJ25ldyBpc3NpbScpXG4gICAgICAuY2xpY2tPdXRzaWRlVG9DbG9zZSh0cnVlKVxuICAgICAgLnJlcXVpcmVkKHRydWUpXG4gICAgICAub2soJ0NyZWF0ZSEnKVxuICAgICAgLmNhbmNlbCgnQ2FuY2VsJyk7XG4gICAgbWREaWFsb2cuc2hvdyhjb25maXJtKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIGxldCBjdXJyX2RpciA9IG9iai5zY29wZS5jdXJyX2RpcjtcbiAgICAgIGlmIChjdXJyX2Rpcikge1xuICAgICAgICBjdXJyX2Rpci5hZGRfZmlsZShyZXN1bHQsIDAsIHtcbiAgICAgICAgICBtb2RlbF90eXBlOiAnU2Vzc2lvbicsXG4gICAgICAgICAgaWNvbjogJ1Nlc3Npb24nLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoKSB7fSk7XG5cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cy5GaWxlRXhwbG9yZXJDdXJyRGlySXNzaW0gPSBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2N1cnJkaXJfaXNzaW07XG5cblxuLyoqXG4gKiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2lzc2ltXG4gKiBAZXh0ZW5kcyB7U3BpbmFsRHJpdmVfQXBwfVxuICovXG5jbGFzcyBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2lzc2ltIGV4dGVuZHMgU3BpbmFsRHJpdmVfQXBwIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2lzc2ltLlxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9pc3NpbVxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJJc3NpbUZpbGVFeHBsb3JlclwiLCBcIk9wZW4gd2l0aCBJcydzaW1cIiwgMSwgXCJkZXNrdG9wX3dpbmRvd3NcIiwgXCJPcGVuIHdpdGggSXMnc2ltXCIpO1xuICAgIHRoaXMub3JkZXJfcHJpb3JpdHkgPSA1O1xuICB9XG4gIC8qKlxuICAgKiBtZXRob2QgdG8gaGFuZGxlIHRoZSBzZWxlY3Rpb25cbiAgICogXG4gICAqIEBwYXJhbSB7YW55fSBlbGVtZW50IFxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9pc3NpbVxuICAgKi9cbiAgYWN0aW9uKG9iaikge1xuICAgIGxldCBhdXRoU2VydmljZSA9IG9iai5zY29wZS5pbmplY3Rvci5nZXQoJ2F1dGhTZXJ2aWNlJyk7XG4gICAgbGV0IGZzX3BhdGggPSBvYmouc2NvcGUuZnNfcGF0aDtcbiAgICBsZXQgdXNlcm5hbWUgPSBhdXRoU2VydmljZS5nZXRfdXNlcigpLnVzZXJuYW1lO1xuICAgIGxldCBwYXRoID0gXCIvX191c2Vyc19fL1wiICsgdXNlcm5hbWU7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBmc19wYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwYXRoICs9ICcvJyArIGZzX3BhdGhbaV0ubmFtZTtcbiAgICB9XG4gICAgcGF0aCArPSAnLycgKyBvYmouZmlsZS5uYW1lO1xuICAgIGxldCBteVdpbmRvdyA9IHdpbmRvdy5vcGVuKCcnLCAnJyk7XG4gICAgbXlXaW5kb3cuZG9jdW1lbnQubG9jYXRpb24gPSBcIi9odG1sL2xhYi5odG1sI1wiICsgZW5jb2RlVVJJKHBhdGgpO1xuICAgIG15V2luZG93LmZvY3VzKCk7XG4gIH1cblxuICBpc19zaG93bihkKSB7XG4gICAgaWYgKGQgJiYgZC5maWxlICYmIGQuZmlsZS5fc2VydmVyX2lkKSB7XG4gICAgICBsZXQgZmlsZSA9IEZpbGVTeXN0ZW0uX29iamVjdHNbZC5maWxlLl9zZXJ2ZXJfaWRdO1xuICAgICAgaWYgKGZpbGUgJiYgZmlsZSBpbnN0YW5jZW9mIEZpbGUgJiYgZmlsZS5faW5mby5tb2RlbF90eXBlICYmXG4gICAgICAgIGZpbGUuX2luZm8ubW9kZWxfdHlwZS5nZXQoKSA9PT0gJ1Nlc3Npb24nKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cy5GaWxlRXhwbG9yZXJJc3NpbSA9IFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfaXNzaW07IiwiLyoqXG4gKiBTcGluYWxEcml2ZV9BcHBfc2hhcmVcbiAqIEBleHRlbmRzIHtTcGluYWxEcml2ZV9BcHB9XG4gKi9cbmNsYXNzIFNwaW5hbERyaXZlX0FwcF9zaGFyZSBleHRlbmRzIFNwaW5hbERyaXZlX0FwcCB7fVxuLyoqXG4gKiBEaWFsb2dTaGFyZUN0cmwgLSBjb250cm9sbGVyIHRvIGJlIGFkZGVkIHdpdGhpbiBhIGAkbWREaWFsb2cuc2hvd2Agb3B0aW9uIHBhcmFtZXRlci5cbiAqICBlLmcuIHtjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCIkbWREaWFsb2dcIiwgXCJtb2RlbF9zZXJ2ZXJfaWRcIiwgXCJzcGluYWxNb2RlbERpY3Rpb25hcnlcIiwgXCJtZERpYWxvZ1wiLCBcIm5nU3BpbmFsQ29yZVwiLERpYWxvZ1NoYXJlQ3RybF0sIHRlbXBsYXRlOiBzaGFyZVRlbXBsYXRlLCAuLi4gLCBsb2NhbHM6XG4gKiB7bW9kZWxfc2VydmVyX2lkOiBvYmosc3BpbmFsTW9kZWxEaWN0aW9uYXJ5OiBzcGluYWxNb2RlbERpY3Rpb25hcnksIG1kRGlhbG9nOiBtZERpYWxvZywgbmdTcGluYWxDb3JlOiBuZ1NwaW5hbENvcmV9XG4gKiB9XG4gKiBAcGFyYW0ge2FueX0gJHNjb3BlIGF1dG9tYXRpY2x5IGdpdmVuIGluIHRoZSBtZERpYWxvZy5zaG93XG4gKiBAcGFyYW0ge2FuZ3VsYXJ9ICRtZERpYWxvZyBhdXRvbWF0aWNseSBnaXZlbiBpbiB0aGUgbWREaWFsb2cuc2hvd1xuICogQHBhcmFtIHtudW1iZXJ9IG1vZGVsX3NlcnZlcl9pZCByZXNvbHZlZCB3aXRoaW4gdGhlIGBsb2NhbGAgb2JqZWN0IGdpdmVuIHRvIHRoZSAkbWREaWFsb2cuc2hvdyguLi4pXG4gKiBAcGFyYW0ge2FuZ3VsYXJGYWN0b3J5fSBzcGluYWxNb2RlbERpY3Rpb25hcnkgc2FtZVxuICogQHBhcmFtIHthbmd1bGFyRmFjdG9yeX0gbWREaWFsb2cgc2FtZVxuICogQHBhcmFtIHthbmd1bGFyRmFjdG9yeX0gbmdTcGluYWxDb3JlIHNhbWVcbiAqL1xuU3BpbmFsRHJpdmVfQXBwX3NoYXJlLkRpYWxvZ1NoYXJlQ3RybCA9IGZ1bmN0aW9uICgkc2NvcGUsICRtZERpYWxvZywgbW9kZWxfc2VydmVyX2lkLCBzcGluYWxNb2RlbERpY3Rpb25hcnksIG1kRGlhbG9nLCBuZ1NwaW5hbENvcmUpIHtcbiAgc3BpbmFsTW9kZWxEaWN0aW9uYXJ5LmluaXQoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAkc2NvcGUudXNlcnMgPSBzcGluYWxNb2RlbERpY3Rpb25hcnkudXNlcnMuZ2V0KCk7XG4gICAgJHNjb3BlLnJpZ2h0UmVhZCA9IGZhbHNlO1xuICAgICRzY29wZS5yaWdodFdyaXRlID0gZmFsc2U7XG4gICAgJHNjb3BlLnJpZ2h0U2hhcmUgPSBmYWxzZTtcbiAgICAkc2NvcGUudXNlcnMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGVsZW1lbnQuc2hhcmVfc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgIGVsZW1lbnQuX2xvd2VybmFtZSA9IGVsZW1lbnQubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH0pO1xuICAgIGxldCBtb2QgPSBGaWxlU3lzdGVtLl9vYmplY3RzW21vZGVsX3NlcnZlcl9pZF07XG4gICAgbGV0IF9kYXRhID0gMDtcbiAgICBpZiAobW9kIGluc3RhbmNlb2YgRmlsZSlcbiAgICAgIF9kYXRhID0gbW9kLl9wdHIuZGF0YS52YWx1ZTtcbiAgICBlbHNlIGlmIChtb2QgaW5zdGFuY2VvZiBQdHIpXG4gICAgICBfZGF0YSA9IG1vZC5kYXRhLnZhbHVlO1xuICAgIGVsc2VcbiAgICAgIF9kYXRhID0gbW9kLl9zZXJ2ZXJfaWQ7XG4gICAgbmdTcGluYWxDb3JlLmxvYWRfcmlnaHQoX2RhdGEpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY3JlYXRlX3JpZ2h0TGlzdChyZXMpO1xuICAgIH0sIChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJsb2FkX3JpZ2h0OiBjb3VsZG4ndCBsb2FkIHRoZSByaWdodCBvZiB0aGUgbW9kZWwgXCIgKyBtb2RlbF9zZXJ2ZXJfaWQpO1xuICAgIH0pO1xuICB9KTtcblxuICBmdW5jdGlvbiBjcmVhdGVfcmlnaHRfY29sKGZsYWcsIGZsYWdUeXBlKSB7XG4gICAgaWYgKGZsYWcgJiBmbGFnVHlwZSlcbiAgICAgIHJldHVybiBcIlllc1wiO1xuICAgIHJldHVybiBcIk5vXCI7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVfcmlnaHRMaXN0KG1vZGVsKSB7XG4gICAgJHNjb3BlLnNlbGVjdGVkTW9kZWxTaGFyZWRfdG9fdXNlciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCB1ciA9IG1vZGVsW2ldO1xuICAgICAgJHNjb3BlLnNlbGVjdGVkTW9kZWxTaGFyZWRfdG9fdXNlci5wdXNoKHtcbiAgICAgICAgaWQ6IHVyLnVzZXIuaWQuZ2V0KCksXG4gICAgICAgIG5hbWU6IHVyLnVzZXIubmFtZS5nZXQoKSxcbiAgICAgICAgcmQ6IGNyZWF0ZV9yaWdodF9jb2wodXIuZmxhZy5nZXQoKSwgc3BpbmFsQ29yZS5yaWdodF9mbGFnLlJEKSxcbiAgICAgICAgd3I6IGNyZWF0ZV9yaWdodF9jb2wodXIuZmxhZy5nZXQoKSwgc3BpbmFsQ29yZS5yaWdodF9mbGFnLldSKSxcbiAgICAgICAgYWQ6IGNyZWF0ZV9yaWdodF9jb2wodXIuZmxhZy5nZXQoKSwgc3BpbmFsQ29yZS5yaWdodF9mbGFnLkFEKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgcHJvcGVyIG9iamVjdCB3aGVuIHRoZSBhcHBlbmQgaXMgY2FsbGVkLlxuICAgKi9cbiAgJHNjb3BlLnRyYW5zZm9ybUNoaXAgPSBmdW5jdGlvbiAoY2hpcCkge1xuICAgIC8vIElmIGl0IGlzIGFuIG9iamVjdCwgaXQncyBhbHJlYWR5IGEga25vd24gY2hpcFxuICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KGNoaXApKSB7XG4gICAgICByZXR1cm4gY2hpcDtcbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlLCBjcmVhdGUgYSBuZXcgb25lXG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGNoaXAsXG4gICAgICB0eXBlOiAnbmV3J1xuICAgIH07XG4gIH07XG4gICRzY29wZS5lcnJvcl9tc2dzID0gW107XG4gICRzY29wZS5jaGlwX3VzZXJzID0gW107XG4gICRzY29wZS5zZWxlY3RlZEl0ZW0gPSBudWxsO1xuICAkc2NvcGUuc2VhcmNoVGV4dCA9IG51bGw7XG4gICRzY29wZS5jcmVhdGVGaWx0ZXJGb3IgPSAocXVlcnkpID0+IHtcbiAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBhbmd1bGFyLmxvd2VyY2FzZShxdWVyeSk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gZmlsdGVyRm4odXNlcikge1xuICAgICAgcmV0dXJuICh1c2VyLl9sb3dlcm5hbWUuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgPT09IDApIHx8XG4gICAgICAgICh1c2VyLmlkLnRvU3RyaW5nKCkuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgPT09IDApO1xuICAgIH07XG5cbiAgfTtcblxuICAkc2NvcGUucXVlcnlTZWFyY2ggPSAocXVlcnkpID0+IHtcbiAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5ID8gJHNjb3BlLnVzZXJzLmZpbHRlcigkc2NvcGUuY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSkgOiBbXTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcbiAgJHNjb3BlLmNhbmNlbERpYWxvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAkbWREaWFsb2cuaGlkZSgpO1xuICB9O1xuXG4gICRzY29wZS5zdWJtaXREaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IGZsYWcgPSAwO1xuICAgICRzY29wZS5lcnJvcl9tc2dzID0gW107XG4gICAgaWYgKCRzY29wZS5yaWdodFJlYWQgPT0gdHJ1ZSkgZmxhZyB8PSBzcGluYWxDb3JlLnJpZ2h0X2ZsYWcuUkQ7XG4gICAgaWYgKCRzY29wZS5yaWdodFdyaXRlID09IHRydWUpIGZsYWcgfD0gc3BpbmFsQ29yZS5yaWdodF9mbGFnLldSO1xuICAgIGlmICgkc2NvcGUucmlnaHRTaGFyZSA9PSB0cnVlKSBmbGFnIHw9IHNwaW5hbENvcmUucmlnaHRfZmxhZy5BRDtcblxuICAgIGlmICgkc2NvcGUuY2hpcF91c2Vycy5sZW5ndGggPT0gMCkge1xuICAgICAgJHNjb3BlLmVycm9yX21zZ3MucHVzaChcIkFkZCBzb21lIHVzZXIocykgdG8gc2hhcmUuXCIpO1xuICAgIH1cbiAgICBpZiAoZmxhZyA9PSAwKSB7XG4gICAgICAkc2NvcGUuZXJyb3JfbXNncy5wdXNoKFwiQ2hvb3NlIHRoZSBSaWdodCBhY2Nlc3MgdG8gZ2l2ZS5cIik7XG4gICAgfVxuICAgIGlmICgkc2NvcGUuZXJyb3JfbXNncy5sZW5ndGggIT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBkYXRhID0gRmlsZVN5c3RlbS5fb2JqZWN0c1ttb2RlbF9zZXJ2ZXJfaWRdO1xuICAgIGxldCBmaWxlX25hbWUgPSBcIlwiO1xuICAgIGlmIChkYXRhLm5hbWUpXG4gICAgICBmaWxlX25hbWUgPSBkYXRhLm5hbWUuZ2V0KCk7XG4gICAgZWxzZVxuICAgICAgZmlsZV9uYW1lID0gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lICsgXCJfXCIgKyBkYXRhLl9zZXJ2ZXJfaWQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuY2hpcF91c2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgbmdTcGluYWxDb3JlLnNoYXJlX21vZGVsKGRhdGEsIGZpbGVfbmFtZSwgZmxhZywgJHNjb3BlLmNoaXBfdXNlcnNbaV0ubmFtZSk7XG4gICAgfVxuICAgICRtZERpYWxvZy5oaWRlKCk7XG4gIH07XG59O1xuXG5TcGluYWxEcml2ZV9BcHBfc2hhcmUuc2hhcmVUZW1wbGF0ZSA9ICc8bWQtZGlhbG9nIGFyaWEtbGFiZWw9XCJTaGFyaW5nIHNldHRpbmdcIj4nICtcbiAgJyAgPG1kLWRpYWxvZy1jb250ZW50IHN0eWxlPVwicGFkZGluZy1sZWZ0OiAxMHB4O3BhZGRpbmctcmlnaHQ6IDEwcHg7XCI+JyArXG4gICcgICAgICAgIDxoMz5TaGFyaW5nIHNldHRpbmc8L2gzPicgK1xuICAnICAgICAgICA8aDUgc3R5bGU9XCJtYXJnaW4tdG9wOiAzMHB4O21hcmdpbi1ib3R0b206IDBweDtcIj5JbnZpdGUgcGVvcGxlOjwvaDU+JyArXG4gICcgICAgICAgIDxtZC1jaGlwcyBuZy1tb2RlbD1cImNoaXBfdXNlcnNcIiBtZC1hdXRvY29tcGxldGUtc25hcCBtZC10cmFuc2Zvcm0tY2hpcD1cInRyYW5zZm9ybUNoaXAoJGNoaXApXCIgbWQtcmVxdWlyZS1tYXRjaD1cInRydWVcIj4nICtcbiAgJyAgICAgICAgPG1kLWF1dG9jb21wbGV0ZSBtZC1zZWxlY3RlZC1pdGVtPVwic2VsZWN0ZWRJdGVtXCIgbWQtc2VhcmNoLXRleHQ9XCJzZWFyY2hUZXh0XCIgbWQtaXRlbXM9XCJpdGVtIGluIHF1ZXJ5U2VhcmNoKHNlYXJjaFRleHQpXCInICtcbiAgJyAgICAgICAgICBtZC1pdGVtLXRleHQ9XCJpdGVtLm5hbWVcIiBwbGFjZWhvbGRlcj1cIlVzZXIocykgdG8gc2hhcmUuLi5cIj4nICtcbiAgJyAgICAgICAgICA8c3BhbiBtZC1oaWdobGlnaHQtdGV4dD1cInNlYXJjaFRleHRcIj57e2l0ZW0uaWR9fSAtIHt7aXRlbS5uYW1lfX08L3NwYW4+JyArXG4gICcgICAgICAgIDwvbWQtYXV0b2NvbXBsZXRlPicgK1xuICAnICAgICAgICA8bWQtY2hpcC10ZW1wbGF0ZT4nICtcbiAgJyAgICAgICAgICA8c3Bhbj4nICtcbiAgJyAgICAgICAgICAgIDxzdHJvbmc+e3skY2hpcC5uYW1lfX08L3N0cm9uZz4nICtcbiAgJyAgICAgICAgICAgIDxlbT4oe3skY2hpcC5pZH19KTwvZW0+JyArXG4gICcgICAgICAgICAgPC9zcGFuPicgK1xuICAnICAgICAgICA8L21kLWNoaXAtdGVtcGxhdGU+JyArXG4gICcgICAgIDwvbWQtY2hpcHM+JyArXG4gICcgICAgICAgIDxoNSBzdHlsZT1cIm1hcmdpbi10b3A6IDMwcHg7bWFyZ2luLWJvdHRvbTogMHB4O1wiPldobyBoYXMgYWNjZXNzOjwvaDU+JyArXG4gICcgICAgICA8bWQtdGFibGUtY29udGFpbmVyPicgK1xuICAnICAgICAgICA8dGFibGUgbWQtdGFibGU+JyArXG4gICcgICAgICAgICAgPHRoZWFkIG1kLWhlYWQ+JyArXG4gICcgICAgICAgICAgICA8dHIgc3R5bGU9XCJoZWlnaHQ6IDI1cHg7XCI+JyArXG4gICcgICAgICAgICAgICAgIDx0aCBtZC1jb2x1bW4+SWQ8L3RoPicgK1xuICAnICAgICAgICAgICAgICA8dGggbWQtY29sdW1uIHN0eWxlPVwid2lkdGg6IDMwJTtcIj5Vc2VyPC90aD4nICtcbiAgJyAgICAgICAgICAgICAgPHRoIG1kLWNvbHVtbj5SZWFkPC90aD4nICtcbiAgJyAgICAgICAgICAgICAgPHRoIG1kLWNvbHVtbj5Xcml0ZTwvdGg+JyArXG4gICcgICAgICAgICAgICAgIDx0aCBtZC1jb2x1bW4+QWRtaW48L3RoPicgK1xuICAnICAgICAgICAgICAgPC90cj4nICtcbiAgJyAgICAgICAgICA8L3RoZWFkPicgK1xuICAnICAgICAgICAgIDx0Ym9keSBtZC1ib2R5PicgK1xuICAnICAgICAgICAgICAgPHRyICBtZC1zZWxlY3QtaWQ9XCJuYW1lXCIgbmctcmVwZWF0PVwiX3VzZXIgaW4gc2VsZWN0ZWRNb2RlbFNoYXJlZF90b191c2VyXCIgZmlsZS1vYmo9XCJmaWxlXCI+JyArXG4gICcgICAgICAgICAgICAgIDx0ZCBtZC1jZWxsPnt7X3VzZXIuaWR9fTwvdGQ+JyArXG4gICcgICAgICAgICAgICAgIDx0ZCBtZC1jZWxsPnt7X3VzZXIubmFtZX19PC90ZD4nICtcbiAgJyAgICAgICAgICAgICAgPHRkIG1kLWNlbGw+e3tfdXNlci5yZH19PC90ZD4nICtcbiAgJyAgICAgICAgICAgICAgPHRkIG1kLWNlbGw+e3tfdXNlci53cn19PC90ZD4nICtcbiAgJyAgICAgICAgICAgICAgPHRkIG1kLWNlbGw+e3tfdXNlci5hZH19PC90ZD4nICtcbiAgJyAgICAgICAgICAgIDwvdHI+JyArXG4gICcgICAgICAgICAgPC90Ym9keT4nICtcbiAgJyAgICAgICAgPC90YWJsZT4nICtcbiAgJyAgICAgIDwvbWQtdGFibGUtY29udGFpbmVyPicgK1xuICAnICAgICAgICA8aDUgc3R5bGU9XCJtYXJnaW4tdG9wOiAzMHB4O21hcmdpbi1ib3R0b206IDBweDtcIj5SaWdodCBhY2Nlc3MgdG8gZ2l2ZTo8L2g1PicgK1xuICAnICAgIDxtZC1pbnB1dC1jb250YWluZXIgc3R5bGU9XCJtYXJnaW46IDA7XCIgY2xhc3M9XCJtZC1ibG9ja1wiPicgK1xuICAnICAgICAgICA8bWQtc3dpdGNoIGNsYXNzPVwibWQtcHJpbWFyeVwiIHN0eWxlPVwibWFyZ2luOiAxNXB4O1wiIG5hbWU9XCJSZWFkXCIgbmctbW9kZWw9XCJyaWdodFJlYWRcIj4nICtcbiAgJyAgICAgICAgICBSZWFkJyArXG4gICcgICAgICAgIDwvbWQtc3dpdGNoPicgK1xuICAnICAgICAgICA8bWQtc3dpdGNoIGNsYXNzPVwibWQtcHJpbWFyeVwiIHN0eWxlPVwibWFyZ2luOiAxNXB4O1wiIG5hbWU9XCJXcml0ZVwiIG5nLW1vZGVsPVwicmlnaHRXcml0ZVwiPicgK1xuICAnICAgICAgICAgIFdyaXRlJyArXG4gICcgICAgICAgIDwvbWQtc3dpdGNoPicgK1xuICAnICAgICAgICA8bWQtc3dpdGNoIGNsYXNzPVwibWQtcHJpbWFyeVwiIHN0eWxlPVwibWFyZ2luOiAxNXB4O1wiIG5hbWU9XCJTaGFyZVwiIG5nLW1vZGVsPVwicmlnaHRTaGFyZVwiPicgK1xuICAnICAgICAgICAgIFNoYXJlJyArXG4gICcgICAgICAgIDwvbWQtc3dpdGNoPicgK1xuICAnICAgIDwvbWQtaW5wdXQtY29udGFpbmVyPicgK1xuICAnIDxwIGNsYXNzPVwicC1lcnJvciBmYWRlaW5cIiBuZy1yZXBlYXQ9XCJlcnJvcl9tc2cgaW4gZXJyb3JfbXNnc1wiPnt7ZXJyb3JfbXNnfX08L3A+JyArXG4gICcgIDwvbWQtZGlhbG9nLWNvbnRlbnQ+JyArXG4gICcgIDxtZC1kaWFsb2ctYWN0aW9ucz4nICtcbiAgJyAgICA8bWQtYnV0dG9uIG5nLWNsaWNrPVwiY2FuY2VsRGlhbG9nKClcIiBjbGFzcz1cIm1kLXByaW1hcnlcIj4nICtcbiAgJyAgICAgIENhbmNlbCcgK1xuICAnICAgIDwvbWQtYnV0dG9uPicgK1xuICAnICAgIDxtZC1idXR0b24gbmctY2xpY2s9XCJzdWJtaXREaWFsb2coKVwiIGNsYXNzPVwibWQtcHJpbWFyeVwiPicgK1xuICAnICAgICAgU3VibWl0JyArXG4gICcgICAgPC9tZC1idXR0b24+JyArXG4gICcgIDwvbWQtZGlhbG9nLWFjdGlvbnM+JyArXG4gICc8L21kLWRpYWxvZz4nO1xuXG4vKipcbiAqIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfc2hhcmVcbiAqIEBleHRlbmRzIHtTcGluYWxEcml2ZV9BcHBfc2hhcmV9XG4gKi9cbmNsYXNzIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfc2hhcmUgZXh0ZW5kcyBTcGluYWxEcml2ZV9BcHBfc2hhcmUge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfc2hhcmUuXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX3NoYXJlXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIlNoYXJlRmlsZUV4cGxvcmVyXCIsIFwiU2hhcmUuLi5cIiwgMiwgXCJzaGFyZVwiLCBcIlNoYXJlIE1vZGVscyB3aXRoIG90aGVyIFVzZXJzXCIpO1xuICAgIC8vIHN1cGVyKFwiU2hhcmVGaWxlRXhwbG9yZXJcIiwgXCJTaGFyZS4uLlwiLCAyLCBcInNoYXJlXCIsIFwiU2hhcmUgTW9kZWxzIHdpdGggb3RoZXIgVXNlcnNcIiwgXCJzaGFyZVwiLCBbXCJhbGxcIl0sIFwiYWxsXCIpO1xuICB9XG4gIC8qKlxuICAgKiBtZXRob2QgdG8gaGFuZGxlIHRoZSBzZWxlY3Rpb25cbiAgICogXG4gICAqIEBwYXJhbSB7YW55fSBlbGVtZW50IFxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9zaGFyZVxuICAgKi9cbiAgYWN0aW9uKG9iaikge1xuICAgIGNvbnNvbGUubG9nKG9iaik7XG4gICAgLy8gbGV0IHNwaW5hbE1vZGVsRGljdGlvbmFyeSA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5pbmplY3RvcigpLmdldCgnc3BpbmFsTW9kZWxEaWN0aW9uYXJ5Jyk7XG4gICAgbGV0IHNwaW5hbE1vZGVsRGljdGlvbmFyeSA9IG9iai5zY29wZS5pbmplY3Rvci5nZXQoJ3NwaW5hbE1vZGVsRGljdGlvbmFyeScpO1xuICAgIGxldCBtZERpYWxvZyA9IG9iai5zY29wZS5pbmplY3Rvci5nZXQoJyRtZERpYWxvZycpO1xuICAgIGxldCBuZ1NwaW5hbENvcmUgPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCduZ1NwaW5hbENvcmUnKTtcbiAgICBtZERpYWxvZy5zaG93KHtcbiAgICAgIGNvbnRyb2xsZXI6IFtcIiRzY29wZVwiLCBcIiRtZERpYWxvZ1wiLCBcIm1vZGVsX3NlcnZlcl9pZFwiLCBcInNwaW5hbE1vZGVsRGljdGlvbmFyeVwiLCBcIm1kRGlhbG9nXCIsIFwibmdTcGluYWxDb3JlXCIsIFNwaW5hbERyaXZlX0FwcF9zaGFyZS5EaWFsb2dTaGFyZUN0cmxdLFxuICAgICAgdGVtcGxhdGU6IFNwaW5hbERyaXZlX0FwcF9zaGFyZS5zaGFyZVRlbXBsYXRlLFxuICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICB0YXJnZXRFdmVudDogb2JqLmV2dCxcbiAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICBsb2NhbHM6IHtcbiAgICAgICAgbW9kZWxfc2VydmVyX2lkOiBvYmouZmlsZS5fc2VydmVyX2lkLFxuICAgICAgICBzcGluYWxNb2RlbERpY3Rpb25hcnk6IHNwaW5hbE1vZGVsRGljdGlvbmFyeSxcbiAgICAgICAgbWREaWFsb2c6IG1kRGlhbG9nLFxuICAgICAgICBuZ1NwaW5hbENvcmU6IG5nU3BpbmFsQ29yZVxuICAgICAgfSxcblxuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzLkZpbGVFeHBsb3JlclNoYXJlID0gU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9zaGFyZTtcblxuXG4vKipcbiAqIFNwaW5hbERyaXZlX0FwcF9Gb2xkZXJFeHBsb3Jlcl9zaGFyZVxuICogQGV4dGVuZHMge1NwaW5hbERyaXZlX0FwcF9zaGFyZX1cbiAqL1xuY2xhc3MgU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX3NoYXJlIGV4dGVuZHMgU3BpbmFsRHJpdmVfQXBwX3NoYXJlIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfc2hhcmUuXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfc2hhcmVcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiU2hhcmVGb2xkZXJFeHBsb3JlclwiLCBcIlNoYXJlLi4uXCIsIDMsIFwiZmEgZmEtc2hhcmUtYWx0XCIsIFwiU2hhcmUgTW9kZWxzIHdpdGggb3RoZXIgVXNlcnNcIik7XG4gICAgLy8gc3VwZXIoXCJTaGFyZUZvbGRlckV4cGxvcmVyXCIsIFwiU2hhcmUuLi5cIiwgMywgXCJmYSBmYS1zaGFyZS1hbHRcIiwgXCJTaGFyZSBNb2RlbHMgd2l0aCBvdGhlciBVc2Vyc1wiLCBcInNoYXJlXCIsIFtcImFsbFwiXSwgXCJhbGxcIik7XG4gIH1cbiAgLyoqXG4gICAqIG1ldGhvZCB0byBoYW5kbGUgdGhlIHNlbGVjdGlvblxuICAgKiBcbiAgICogQHBhcmFtIHthbnl9IGVsZW1lbnQgXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfc2hhcmVcbiAgICovXG4gIGFjdGlvbihvYmopIHtcbiAgICBsZXQgc3BpbmFsTW9kZWxEaWN0aW9uYXJ5ID0gb2JqLnNjb3BlLmluamVjdG9yLmdldCgnc3BpbmFsTW9kZWxEaWN0aW9uYXJ5Jyk7XG4gICAgbGV0IG1kRGlhbG9nID0gb2JqLnNjb3BlLmluamVjdG9yLmdldCgnJG1kRGlhbG9nJyk7XG4gICAgbGV0IG5nU3BpbmFsQ29yZSA9IG9iai5zY29wZS5pbmplY3Rvci5nZXQoJ25nU3BpbmFsQ29yZScpO1xuICAgIG1kRGlhbG9nLnNob3coe1xuICAgICAgY29udHJvbGxlcjogW1wiJHNjb3BlXCIsIFwiJG1kRGlhbG9nXCIsIFwibW9kZWxfc2VydmVyX2lkXCIsIFwic3BpbmFsTW9kZWxEaWN0aW9uYXJ5XCIsIFwibWREaWFsb2dcIiwgXCJuZ1NwaW5hbENvcmVcIiwgU3BpbmFsRHJpdmVfQXBwX3NoYXJlLkRpYWxvZ1NoYXJlQ3RybF0sXG4gICAgICB0ZW1wbGF0ZTogU3BpbmFsRHJpdmVfQXBwX3NoYXJlLnNoYXJlVGVtcGxhdGUsXG4gICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICBsb2NhbHM6IHtcbiAgICAgICAgbW9kZWxfc2VydmVyX2lkOiBvYmoubW9kZWxfc2VydmVyX2lkLFxuICAgICAgICBzcGluYWxNb2RlbERpY3Rpb25hcnk6IHNwaW5hbE1vZGVsRGljdGlvbmFyeSxcbiAgICAgICAgbWREaWFsb2c6IG1kRGlhbG9nLFxuICAgICAgICBuZ1NwaW5hbENvcmU6IG5nU3BpbmFsQ29yZVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cy5Gb2xkZXJFeHBsb3JlclNoYXJlID0gU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX3NoYXJlO1xuXG4vKipcbiAqIFNwaW5hbERyaXZlX0FwcF9JbnNwZWN0b3Jfc2hhcmVcbiAqIEBleHRlbmRzIHtTcGluYWxEcml2ZV9BcHBfc2hhcmV9XG4gKi9cbmNsYXNzIFNwaW5hbERyaXZlX0FwcF9JbnNwZWN0b3Jfc2hhcmUgZXh0ZW5kcyBTcGluYWxEcml2ZV9BcHBfc2hhcmUge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFNwaW5hbERyaXZlX0FwcF9JbnNwZWN0b3Jfc2hhcmUuXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfSW5zcGVjdG9yX3NoYXJlXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIlNoYXJlSW5zcGVjdG9yXCIsIFwiU2hhcmUuLi5cIiwgMywgXCJzaGFyZVwiLCBcIlNoYXJlIE1vZGVscyB3aXRoIG90aGVyIFVzZXJzXCIpO1xuICAgIC8vIHN1cGVyKFwiU2hhcmVJbnNwZWN0b3JcIiwgXCJTaGFyZS4uLlwiLCAzLCBcInNoYXJlXCIsIFwiU2hhcmUgTW9kZWxzIHdpdGggb3RoZXIgVXNlcnNcIiwgXCJzaGFyZVwiLCBbXCJhbGxcIl0sIFwiYWxsXCIpO1xuICB9XG4gIC8qKlxuICAgKiBtZXRob2QgdG8gaGFuZGxlIHRoZSBzZWxlY3Rpb25cbiAgICogXG4gICAqIEBwYXJhbSB7YW55fSBlbGVtZW50IFxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0luc3BlY3Rvcl9zaGFyZVxuICAgKi9cbiAgYWN0aW9uKG9iaikge1xuICAgIGxldCBzcGluYWxNb2RlbERpY3Rpb25hcnkgPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCdzcGluYWxNb2RlbERpY3Rpb25hcnknKTtcbiAgICBsZXQgbWREaWFsb2cgPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCckbWREaWFsb2cnKTtcbiAgICBsZXQgbmdTcGluYWxDb3JlID0gb2JqLnNjb3BlLmluamVjdG9yLmdldCgnbmdTcGluYWxDb3JlJyk7XG4gICAgbWREaWFsb2cuc2hvdyh7XG4gICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCIkbWREaWFsb2dcIiwgXCJtb2RlbF9zZXJ2ZXJfaWRcIiwgXCJzcGluYWxNb2RlbERpY3Rpb25hcnlcIiwgXCJtZERpYWxvZ1wiLCBcIm5nU3BpbmFsQ29yZVwiLCBTcGluYWxEcml2ZV9BcHBfc2hhcmUuRGlhbG9nU2hhcmVDdHJsXSxcbiAgICAgIHRlbXBsYXRlOiBTcGluYWxEcml2ZV9BcHBfc2hhcmUuc2hhcmVUZW1wbGF0ZSxcbiAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgIGxvY2Fsczoge1xuICAgICAgICBtb2RlbF9zZXJ2ZXJfaWQ6IG9iai5tb2RlbF9zZXJ2ZXJfaWQsXG4gICAgICAgIHNwaW5hbE1vZGVsRGljdGlvbmFyeTogc3BpbmFsTW9kZWxEaWN0aW9uYXJ5LFxuICAgICAgICBtZERpYWxvZzogbWREaWFsb2csXG4gICAgICAgIG5nU3BpbmFsQ29yZTogbmdTcGluYWxDb3JlXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogbWV0aG9kIHRvIGtub3cgaWYgdGhlIGFwcCBpcyBuZWVkZWQgdG8gYmUgc2hvd24uXG4gICAqIGlmIHRoZSBtZXRob2QgaXMgbm90IGRlZmluZWQgdGhlbiB0aGUgbW9kZWwgaXMgc2hvd24gYnkgZGVmYXVsdFxuICAgKiBAcGFyYW0ge09iamVjdH0gZCBub2RlIG9mIHRoZSB0cmVlIHNlbGVjdGlvbm5lZFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9JbnNwZWN0b3Jfc2hhcmVcbiAgICovXG4gIGlzX3Nob3duKGQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMuSW5zcGVjdG9yU2hhcmUgPSBTcGluYWxEcml2ZV9BcHBfSW5zcGVjdG9yX3NoYXJlOyIsIi8qKlxuICogU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX25ld0ZvbGRlclxuICogQGV4dGVuZHMge1NwaW5hbERyaXZlX0FwcH1cbiAqL1xuY2xhc3MgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX25ld0ZvbGRlciBleHRlbmRzIFNwaW5hbERyaXZlX0FwcCB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX25ld0ZvbGRlci5cbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfY3VycmRpcl9uZXdGb2xkZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiTmV3Rm9sZGVyRmlsZUV4cGxvcmVyQ3VyckRpclwiLCBcIk5ldyBGb2xkZXIuLi5cIiwgMSwgXCJjcmVhdGVfbmV3X2ZvbGRlclwiLCBcIkNyZWF0ZSBhIG5ldyBGb2xkZXJcIik7XG4gIH1cbiAgLyoqXG4gICAqIG1ldGhvZCB0byBoYW5kbGUgdGhlIHNlbGVjdGlvblxuICAgKiBcbiAgICogQHBhcmFtIHthbnl9IGVsZW1lbnQgXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2N1cnJkaXJfbmV3Rm9sZGVyXG4gICAqL1xuICBhY3Rpb24ob2JqKSB7XG4gICAgbGV0IG1kRGlhbG9nID0gb2JqLnNjb3BlLmluamVjdG9yLmdldCgnJG1kRGlhbG9nJyk7XG4gICAgbGV0IHNwaW5hbEZpbGVTeXN0ZW0gPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCdzcGluYWxGaWxlU3lzdGVtJyk7XG4gICAgY29uc29sZS5sb2cob2JqKTtcbiAgICB2YXIgY29uZmlybSA9IG1kRGlhbG9nLnByb21wdCgpXG4gICAgICAudGl0bGUoJ05ldyBGb2xkZXInKVxuICAgICAgLnBsYWNlaG9sZGVyKCdVbnRpdGxlZCBmb2xkZXInKVxuICAgICAgLmFyaWFMYWJlbCgnTmV3IEZvbGRlcicpXG4gICAgICAuaW5pdGlhbFZhbHVlKCdVbnRpdGxlZCBmb2xkZXInKVxuICAgICAgLmNsaWNrT3V0c2lkZVRvQ2xvc2UodHJ1ZSlcbiAgICAgIC5yZXF1aXJlZCh0cnVlKVxuICAgICAgLm9rKCdDcmVhdGUhJylcbiAgICAgIC5jYW5jZWwoJ0NhbmNlbCcpO1xuICAgIG9iai5vcmlnaW5hbCA9IHtcbiAgICAgIG1vZGVsOiBvYmoubW9kZWwuX3NlcnZlcl9pZFxuICAgIH07XG4gICAgbWREaWFsb2cuc2hvdyhjb25maXJtKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIHNwaW5hbEZpbGVTeXN0ZW0ubmV3Rm9sZGVyKG51bGwsIG9iaiwgcmVzdWx0KTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7fSk7XG5cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cy5GaWxlRXhwbG9yZXJDdXJyRGlyTmV3Rm9sZGVyID0gU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX25ld0ZvbGRlcjtcblxuXG4vKipcbiAqIFNwaW5hbERyaXZlX0FwcF9Gb2xkZXJFeHBsb3Jlcl9uZXdGb2xkZXJcbiAqIEBleHRlbmRzIHtTcGluYWxEcml2ZV9BcHB9XG4gKi9cbmNsYXNzIFNwaW5hbERyaXZlX0FwcF9Gb2xkZXJFeHBsb3Jlcl9uZXdGb2xkZXIgZXh0ZW5kcyBTcGluYWxEcml2ZV9BcHAge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFNwaW5hbERyaXZlX0FwcF9Gb2xkZXJFeHBsb3Jlcl9uZXdGb2xkZXIuXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfbmV3Rm9sZGVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIk5ld0ZvbGRlckZvbGRlckV4cGxvcmVyXCIsIFwiTmV3IEZvbGRlci4uLlwiLCAxLCBcImZhIGZhLWZvbGRlclwiLCBcIkNyZWF0ZSBhIG5ldyBGb2xkZXJcIik7XG4gIH1cbiAgLyoqXG4gICAqIG1ldGhvZCB0byBoYW5kbGUgdGhlIHNlbGVjdGlvblxuICAgKiBcbiAgICogQHBhcmFtIHthbnl9IGVsZW1lbnQgXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfbmV3Rm9sZGVyXG4gICAqL1xuICBhY3Rpb24ob2JqKSB7XG4gICAgbGV0IG1kRGlhbG9nID0gb2JqLnNjb3BlLmluamVjdG9yLmdldCgnJG1kRGlhbG9nJyk7XG4gICAgbGV0IHNwaW5hbEZpbGVTeXN0ZW0gPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCdzcGluYWxGaWxlU3lzdGVtJyk7XG4gICAgY29uc29sZS5sb2cob2JqKTtcbiAgICB2YXIgY29uZmlybSA9IG1kRGlhbG9nLnByb21wdCgpXG4gICAgICAudGl0bGUoJ05ldyBGb2xkZXInKVxuICAgICAgLnBsYWNlaG9sZGVyKCdVbnRpdGxlZCBmb2xkZXInKVxuICAgICAgLmFyaWFMYWJlbCgnTmV3IEZvbGRlcicpXG4gICAgICAuY2xpY2tPdXRzaWRlVG9DbG9zZSh0cnVlKVxuICAgICAgLmluaXRpYWxWYWx1ZSgnVW50aXRsZWQgZm9sZGVyJylcbiAgICAgIC5yZXF1aXJlZCh0cnVlKVxuICAgICAgLm9rKCdDcmVhdGUhJylcbiAgICAgIC5jYW5jZWwoJ0NhbmNlbCcpO1xuXG4gICAgbWREaWFsb2cuc2hvdyhjb25maXJtKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIHNwaW5hbEZpbGVTeXN0ZW0ubmV3Rm9sZGVyKG9iai5zY29wZS5hbGxfZGlyLCBvYmoubm9kZSwgcmVzdWx0KTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7fSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMuRm9sZGVyRXhwbG9yZXJOZXdGb2xkZXIgPSBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfbmV3Rm9sZGVyOyIsIi8qKlxuICogU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9yZW5hbWVcbiAqIEBleHRlbmRzIHtTcGluYWxEcml2ZV9BcHB9XG4gKi9cbmNsYXNzIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfcmVuYW1lIGV4dGVuZHMgU3BpbmFsRHJpdmVfQXBwIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX3JlbmFtZS5cbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfcmVuYW1lXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIlJlbmFtZUZpbGVFeHBsb3JlclwiLCBcIlJlbmFtZS4uLlwiLCAxLCBcImVkaXRcIiwgXCJSZW5hbWUgYSBGaWxlXCIpO1xuICB9XG4gIC8qKlxuICAgKiBtZXRob2QgdG8gaGFuZGxlIHRoZSBzZWxlY3Rpb25cbiAgICogXG4gICAqIEBwYXJhbSB7YW55fSBlbGVtZW50IFxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9yZW5hbWVcbiAgICovXG4gIGFjdGlvbihvYmopIHtcbiAgICBsZXQgbWREaWFsb2cgPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCckbWREaWFsb2cnKTtcbiAgICBsZXQgc3BpbmFsRmlsZVN5c3RlbSA9IG9iai5zY29wZS5pbmplY3Rvci5nZXQoJ3NwaW5hbEZpbGVTeXN0ZW0nKTtcbiAgICBsZXQgZiA9IEZpbGVTeXN0ZW0uX29iamVjdHNbb2JqLmZpbGUuX3NlcnZlcl9pZF07XG4gICAgdmFyIGNvbmZpcm0gPSBtZERpYWxvZy5wcm9tcHQoKVxuICAgICAgLnRpdGxlKCdSZW5hbWUnKVxuICAgICAgLnBsYWNlaG9sZGVyKCdGaWxlIE5hbWUnKVxuICAgICAgLmFyaWFMYWJlbCgnUmVuYW1lJylcbiAgICAgIC5jbGlja091dHNpZGVUb0Nsb3NlKHRydWUpXG4gICAgICAucmVxdWlyZWQodHJ1ZSlcbiAgICAgIC5vaygnUmVuYW1lIScpXG4gICAgICAuY2FuY2VsKCdDYW5jZWwnKTtcbiAgICBpZiAoZiAmJiBmLm5hbWUgJiYgZi5uYW1lLmdldCgpKSB7XG4gICAgICBjb25maXJtLmluaXRpYWxWYWx1ZShmLm5hbWUuZ2V0KCkpO1xuICAgIH1cblxuICAgIG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICBpZiAoZi5uYW1lLmdldCgpID09PSByZXN1bHQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqLnNjb3BlLmN1cnJfZGlyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChvYmouc2NvcGUuY3Vycl9kaXJbaV0ubmFtZS5nZXQoKSA9PT0gcmVzdWx0KSB7XG4gICAgICAgICAgbGV0IG1kVG9hc3QgPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCckbWRUb2FzdCcpO1xuXG4gICAgICAgICAgbWRUb2FzdC5zaG93KG1kVG9hc3Quc2ltcGxlKCkudGhlbWUoJ2Vycm9yLXRvYXN0JylcbiAgICAgICAgICAgIC50ZXh0Q29udGVudChcIkVycm9yIHJlbmFtZTogRmlsZSB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0LlwiKSk7XG4gICAgICAgICAgLy8gbWRUb2FzdC5zaG93U2ltcGxlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmLm5hbWUuc2V0KHJlc3VsdCk7XG4gICAgICAvLyBzcGluYWxGaWxlU3lzdGVtLm5ld0ZvbGRlcihudWxsLCBvYmosIHJlc3VsdCk7XG4gICAgfSwgZnVuY3Rpb24gKCkge30pO1xuXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMuRmlsZUV4cGxvcmVyUmVuYW1lID0gU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9yZW5hbWU7XG5cblxuLy8gLyoqXG4vLyAgKiBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfcmVuYW1lXG4vLyAgKiBAZXh0ZW5kcyB7U3BpbmFsRHJpdmVfQXBwfVxuLy8gICovXG4vLyBjbGFzcyBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfcmVuYW1lIGV4dGVuZHMgU3BpbmFsRHJpdmVfQXBwIHtcblxuLy8gICAvKipcbi8vICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfcmVuYW1lLlxuLy8gICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX3JlbmFtZVxuLy8gICAgKi9cbi8vICAgY29uc3RydWN0b3IoKSB7XG4vLyAgICAgc3VwZXIoXCJSZW5hbWVGb2xkZXJFeHBsb3JlclwiLCBcIlJlbmFtZS4uLlwiLCAxLCBcImZhIGZhLXBlbmNpbFwiLCBcIlJlbmFtZSBhIEZpbGVcIik7XG4vLyAgIH1cbi8vICAgLyoqXG4vLyAgICAqIG1ldGhvZCB0byBoYW5kbGUgdGhlIHNlbGVjdGlvblxuLy8gICAgKiBcbi8vICAgICogQHBhcmFtIHthbnl9IGVsZW1lbnQgXG4vLyAgICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfcmVuYW1lXG4vLyAgICAqL1xuLy8gICBhY3Rpb24ob2JqKSB7XG4vLyAgICAgbGV0IG1kRGlhbG9nID0gb2JqLnNjb3BlLmluamVjdG9yLmdldCgnJG1kRGlhbG9nJyk7XG4vLyAgICAgbGV0IHNwaW5hbEZpbGVTeXN0ZW0gPSBvYmouc2NvcGUuaW5qZWN0b3IuZ2V0KCdzcGluYWxGaWxlU3lzdGVtJyk7XG4vLyAgICAgY29uc29sZS5sb2cob2JqKTtcbi8vICAgICBsZXQgZiA9IEZpbGVTeXN0ZW0uX29iamVjdHNbb2JqLm1vZGVsX3NlcnZlcl9pZF07XG4vLyAgICAgdmFyIGNvbmZpcm0gPSBtZERpYWxvZy5wcm9tcHQoKVxuLy8gICAgICAgLnRpdGxlKCdSZW5hbWUnKVxuLy8gICAgICAgLnBsYWNlaG9sZGVyKCdGaWxlIE5hbWUnKVxuLy8gICAgICAgLmFyaWFMYWJlbCgnUmVuYW1lJylcbi8vICAgICAgIC5jbGlja091dHNpZGVUb0Nsb3NlKHRydWUpXG4vLyAgICAgICAucmVxdWlyZWQodHJ1ZSlcbi8vICAgICAgIC5vaygnUmVuYW1lIScpXG4vLyAgICAgICAuY2FuY2VsKCdDYW5jZWwnKTtcbi8vICAgICBjb25zb2xlLmxvZyhmKTtcbi8vICAgICBpZiAoZiAmJiBmLm5hbWUgJiYgZi5uYW1lLmdldCgpKSB7XG4vLyAgICAgICBjb25maXJtLmluaXRpYWxWYWx1ZShmLm5hbWUuZ2V0KCkpO1xuLy8gICAgIH1cblxuLy8gICAgIG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4vLyAgICAgICBmLm5hbWUuc2V0KHJlc3VsdCk7XG4vLyAgICAgfSwgZnVuY3Rpb24gKCkge30pO1xuLy8gICB9XG4vLyB9XG5cbi8vIG1vZHVsZS5leHBvcnRzLkZvbGRlckV4cGxvcmVyUmVuYW1lID0gU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX3JlbmFtZTsiLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9kZWxldGUgPSByZXF1aXJlKCcuL2Jhc2UvU3BpbmFsRHJpdmVfQXBwX2RlbGV0ZScpLkZpbGVFeHBsb3JlckRlbGV0ZTtcbiAgdmFyIFNwaW5hbERyaXZlX0FwcF9Gb2xkZXJFeHBsb3Jlcl9kZWxldGUgPSByZXF1aXJlKCcuL2Jhc2UvU3BpbmFsRHJpdmVfQXBwX2RlbGV0ZScpLkZvbGRlckV4cGxvcmVyRGVsZXRlO1xuICBzcGluYWxEcml2ZV9FbnYuYWRkX2FwcGxpY2F0aW9ucygnRmlsZUV4cGxvcmVyJywgbmV3IFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfZGVsZXRlKCkpO1xuICBzcGluYWxEcml2ZV9FbnYuYWRkX2FwcGxpY2F0aW9ucygnRm9sZGVyRXhwbG9yZXInLCBuZXcgU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX2RlbGV0ZSgpKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgdmFyIFNwaW5hbERyaXZlX0FwcF9JbnNwZWN0b3JfZWRpdCA9IHJlcXVpcmUoJy4vYmFzZS9TcGluYWxEcml2ZV9BcHBfZWRpdCcpLkluc3BlY3RvckVkaXQ7XG4gIHNwaW5hbERyaXZlX0Vudi5hZGRfYXBwbGljYXRpb25zKCdJbnNwZWN0b3InLCBuZXcgU3BpbmFsRHJpdmVfQXBwX0luc3BlY3Rvcl9lZGl0KCkpO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX2lzc2ltID0gcmVxdWlyZSgnLi9iYXNlL1NwaW5hbERyaXZlX0FwcF9pc3NpbS5qcycpLkZpbGVFeHBsb3JlckN1cnJEaXJJc3NpbTtcbiAgc3BpbmFsRHJpdmVfRW52LmFkZF9hcHBsaWNhdGlvbnMoJ0ZpbGVFeHBsb3JlckN1cnJEaXInLCBuZXcgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX2lzc2ltKCkpO1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9pc3NpbSA9IHJlcXVpcmUoJy4vYmFzZS9TcGluYWxEcml2ZV9BcHBfaXNzaW0uanMnKS5GaWxlRXhwbG9yZXJJc3NpbTtcbiAgc3BpbmFsRHJpdmVfRW52LmFkZF9hcHBsaWNhdGlvbnMoJ0ZpbGVFeHBsb3JlcicsIG5ldyBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2lzc2ltKCkpO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX25ld0ZvbGRlciA9IHJlcXVpcmUoJy4vYmFzZS9TcGluYWxEcml2ZV9hcHBfbmV3Rm9sZGVyLmpzJykuRm9sZGVyRXhwbG9yZXJOZXdGb2xkZXI7XG4gIHNwaW5hbERyaXZlX0Vudi5hZGRfYXBwbGljYXRpb25zKCdGb2xkZXJFeHBsb3JlcicsIG5ldyBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfbmV3Rm9sZGVyKCkpO1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX25ld0ZvbGRlciA9IHJlcXVpcmUoJy4vYmFzZS9TcGluYWxEcml2ZV9hcHBfbmV3Rm9sZGVyLmpzJykuRmlsZUV4cGxvcmVyQ3VyckRpck5ld0ZvbGRlcjtcbiAgc3BpbmFsRHJpdmVfRW52LmFkZF9hcHBsaWNhdGlvbnMoJ0ZpbGVFeHBsb3JlckN1cnJEaXInLCBuZXcgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9jdXJyZGlyX25ld0ZvbGRlcigpKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgdmFyIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfcmVuYW1lID0gcmVxdWlyZSgnLi9iYXNlL1NwaW5hbERyaXZlX2FwcF9yZW5hbWVGaWxlLmpzJykuRmlsZUV4cGxvcmVyUmVuYW1lO1xuICBzcGluYWxEcml2ZV9FbnYuYWRkX2FwcGxpY2F0aW9ucygnRmlsZUV4cGxvcmVyJywgbmV3IFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfcmVuYW1lKCkpO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9zaGFyZSA9IHJlcXVpcmUoJy4vYmFzZS9TcGluYWxEcml2ZV9BcHBfc2hhcmUnKS5GaWxlRXhwbG9yZXJTaGFyZTtcbiAgc3BpbmFsRHJpdmVfRW52LmFkZF9hcHBsaWNhdGlvbnMoJ0ZpbGVFeHBsb3JlcicsIG5ldyBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX3NoYXJlKCkpO1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZvbGRlckV4cGxvcmVyX3NoYXJlID0gcmVxdWlyZSgnLi9iYXNlL1NwaW5hbERyaXZlX0FwcF9zaGFyZScpLkZvbGRlckV4cGxvcmVyU2hhcmU7XG4gIHNwaW5hbERyaXZlX0Vudi5hZGRfYXBwbGljYXRpb25zKCdGb2xkZXJFeHBsb3JlcicsIG5ldyBTcGluYWxEcml2ZV9BcHBfRm9sZGVyRXhwbG9yZXJfc2hhcmUoKSk7XG4gIHZhciBTcGluYWxEcml2ZV9BcHBfSW5zcGVjdG9yX3NoYXJlID0gcmVxdWlyZSgnLi9iYXNlL1NwaW5hbERyaXZlX0FwcF9zaGFyZScpLkluc3BlY3RvclNoYXJlO1xuICBzcGluYWxEcml2ZV9FbnYuYWRkX2FwcGxpY2F0aW9ucygnSW5zcGVjdG9yJywgbmV3IFNwaW5hbERyaXZlX0FwcF9JbnNwZWN0b3Jfc2hhcmUoKSk7XG5cbn0pKCk7IiwiLyoqXG4gKiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2V4cG9ydF9zdmZcbiAqIEBleHRlbmRzIHtTcGluYWxEcml2ZV9BcHB9XG4gKi9cbmNsYXNzIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfZXhwb3J0X3N2ZiBleHRlbmRzIFNwaW5hbERyaXZlX0FwcCB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9leHBvcnRfc3ZmLlxuICAgKiBAbWVtYmVyb2YgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9leHBvcnRfc3ZmXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcImV4cG9ydFN2ZkZpbGVFeHBsb3JlclwiLCBcIkNyZWF0ZSBCSU0gUHJvamVjdFwiLCA2LCBcImR2clwiLCBcIkNyZWF0ZSBCSU0gUHJvamVjdFwiKTtcbiAgICB0aGlzLm9yZGVyX3ByaW9yaXR5ID0gNTtcbiAgfVxuICAvKipcbiAgICogbWV0aG9kIHRvIGhhbmRsZSB0aGUgc2VsZWN0aW9uXG4gICAqIFxuICAgKiBAcGFyYW0ge2FueX0gZWxlbWVudCBcbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfZXhwb3J0X3N2ZlxuICAgKi9cbiAgYWN0aW9uKG9iaikge1xuICAgIGxldCBtZFRvYXN0ID0gb2JqLnNjb3BlLmluamVjdG9yLmdldCgnJG1kVG9hc3QnKTtcbiAgICBpZiAob2JqICYmIG9iai5maWxlICYmIG9iai5maWxlLm5hbWUpIHtcbiAgICAgIGxldCBtZXNzYWdlID0gJ1N0YXJ0aW5nIHRvIEV4cG9ydCAgXCInICsgb2JqLmZpbGUubmFtZSArICdcIiB0byBzdmYnO1xuICAgICAgbWRUb2FzdC5zaG93U2ltcGxlKG1lc3NhZ2UpO1xuICAgICAgbGV0IGZpbGVuYW1lID0gb2JqLmZpbGUubmFtZS5yZXBsYWNlKC9cXC5bXi8uXSskLywgXCJcIik7XG4gICAgICBjb25zb2xlLmxvZyhmaWxlbmFtZSk7XG4gICAgICBjb25zb2xlLmxvZyhvYmopO1xuICAgICAgbGV0IGN1cnJfZGlyID0gb2JqLnNjb3BlLmN1cnJfZGlyO1xuICAgICAgaWYgKGN1cnJfZGlyKSB7XG4gICAgICAgIGxldCBiYXNlX2ZpbGVuYW1lID0gZmlsZW5hbWUucmVwbGFjZSgvXFwoW1xcZF0qXFwpL2csIFwiXCIpO1xuICAgICAgICBsZXQgeCA9IDA7XG4gICAgICAgIHdoaWxlIChjdXJyX2Rpci5oYXMoZmlsZW5hbWUpKSB7XG4gICAgICAgICAgZmlsZW5hbWUgPSBiYXNlX2ZpbGVuYW1lICsgJygnICsgeCArICcpJztcbiAgICAgICAgICB4Kys7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGYgPSBGaWxlU3lzdGVtLl9vYmplY3RzW29iai5maWxlLl9zZXJ2ZXJfaWRdO1xuICAgICAgICBpZiAoZikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGYpO1xuICAgICAgICAgIGYubG9hZCgobSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobSk7XG4gICAgICAgICAgICBsZXQgZXh0ID0gLyg/OlxcLihbXi5dKykpPyQvLmV4ZWMob2JqLmZpbGUubmFtZSlbMV07XG4gICAgICAgICAgICBjdXJyX2Rpci5hZGRfZmlsZShmaWxlbmFtZSwgMCwge1xuICAgICAgICAgICAgICBtb2RlbF90eXBlOiAnQklNIFByb2plY3QnLFxuICAgICAgICAgICAgICBydnQ6IG5ldyBQdHIobSksXG4gICAgICAgICAgICAgIGV4dDogZXh0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBtZXRob2QgdG8ga25vdyBpZiB0aGUgYXBwIGlzIG5lZWRlZCB0byBiZSBzaG93bi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGQgbm9kZSBvZiB0aGUgdHJlZSBzZWxlY3Rpb25uZWRcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX2V4cG9ydF9zdmZcbiAgICovXG4gIGlzX3Nob3duKGQpIHtcbiAgICBpZiAoZCAmJiBkLmZpbGUgJiYgZC5maWxlLl9zZXJ2ZXJfaWQpIHtcbiAgICAgIGxldCBmaWxlID0gRmlsZVN5c3RlbS5fb2JqZWN0c1tkLmZpbGUuX3NlcnZlcl9pZF07XG4gICAgICBpZiAoZmlsZSkge1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICBpZiAoZmlsZS5faW5mby5tb2RlbF90eXBlICYmIGZpbGUuX2luZm8ubW9kZWxfdHlwZS5nZXQoKSA9PT0gJ1BhdGgnKSB7XG4gICAgICAgICAgICBsZXQgZXh0ID0gLyg/OlxcLihbXi5dKykpPyQvLmV4ZWMoZmlsZS5uYW1lLmdldCgpKVsxXTtcbiAgICAgICAgICAgIGxldCBrbm93bl9leHQgPSBbJ3J2dCcsICdkd2cnLCAnaWZjJ107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtub3duX2V4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoZXh0ID09PSBrbm93bl9leHRbaV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzLkZpbGVFeHBsb3JlckV4cG9ydFN2ZiA9IFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfZXhwb3J0X3N2ZjsiLCIvKipcbiAqIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfc3ZmX3ZpZXdlclxuICogQGV4dGVuZHMge1NwaW5hbERyaXZlX0FwcH1cbiAqL1xuY2xhc3MgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9zdmZfdmlld2VyIGV4dGVuZHMgU3BpbmFsRHJpdmVfQXBwIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX3N2Zl92aWV3ZXIuXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX3N2Zl92aWV3ZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiT3BlblN2ZkZpbGVFeHBsb3JlclwiLCBcIk9wZW4gd2l0aCBCSU0gVmlld2VyXCIsIDYsIFwibG9jYXRpb25fY2l0eVwiLCBcIk9wZW4gdGhlIEJJTSBWaWV3ZXJcIik7XG4gICAgdGhpcy5vcmRlcl9wcmlvcml0eSA9IDU7XG4gIH1cbiAgLyoqXG4gICAqIG1ldGhvZCB0byBoYW5kbGUgdGhlIHNlbGVjdGlvblxuICAgKiBcbiAgICogQHBhcmFtIHthbnl9IGVsZW1lbnQgXG4gICAqIEBtZW1iZXJvZiBTcGluYWxEcml2ZV9BcHBfRmlsZUV4cGxvcmVyX3N2Zl92aWV3ZXJcbiAgICovXG4gIGFjdGlvbihvYmopIHtcblxuICAgIGxldCBhdXRoU2VydmljZSA9IG9iai5zY29wZS5pbmplY3Rvci5nZXQoJ2F1dGhTZXJ2aWNlJyk7XG4gICAgbGV0IGZzX3BhdGggPSBvYmouc2NvcGUuZnNfcGF0aDtcbiAgICBsZXQgdXNlcm5hbWUgPSBhdXRoU2VydmljZS5nZXRfdXNlcigpLnVzZXJuYW1lO1xuICAgIGxldCBwYXRoID0gXCIvX191c2Vyc19fL1wiICsgdXNlcm5hbWU7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBmc19wYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwYXRoICs9ICcvJyArIGZzX3BhdGhbaV0ubmFtZTtcbiAgICB9XG4gICAgcGF0aCArPSAnLycgKyBvYmouZmlsZS5uYW1lO1xuICAgIGxldCBteVdpbmRvdyA9IHdpbmRvdy5vcGVuKCcnLCAnJyk7XG4gICAgbGV0IGxvY2F0aW9uID0gXCIvaHRtbC92aWV3ZXItYW5ub3RhdGlvbnMvaW5kZXguaHRtbCMhL3ZpZXdlci9cIiArIGJ0b2EocGF0aCk7XG4gICAgbXlXaW5kb3cuZG9jdW1lbnQubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICBteVdpbmRvdy5mb2N1cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIG1ldGhvZCB0byBrbm93IGlmIHRoZSBhcHAgaXMgbmVlZGVkIHRvIGJlIHNob3duLlxuICAgKiBAcGFyYW0ge09iamVjdH0gZCBub2RlIG9mIHRoZSB0cmVlIHNlbGVjdGlvbm5lZFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfc3ZmX3ZpZXdlclxuICAgKi9cbiAgaXNfc2hvd24oZCkge1xuICAgIGlmIChkICYmIGQuZmlsZSAmJiBkLmZpbGUuX3NlcnZlcl9pZCkge1xuICAgICAgbGV0IGZpbGUgPSBGaWxlU3lzdGVtLl9vYmplY3RzW2QuZmlsZS5fc2VydmVyX2lkXTtcbiAgICAgIGlmIChmaWxlICYmIGZpbGUgaW5zdGFuY2VvZiBGaWxlICYmIGZpbGUuX2luZm8ubW9kZWxfdHlwZSAmJlxuICAgICAgICBmaWxlLl9pbmZvLm1vZGVsX3R5cGUuZ2V0KCkgPT09ICdCSU0gUHJvamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzLkZpbGVFeHBsb3JlclN2ZlZpZXdlciA9IFNwaW5hbERyaXZlX0FwcF9GaWxlRXhwbG9yZXJfc3ZmX3ZpZXdlcjsiLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9leHBvcnRfc3ZmID0gcmVxdWlyZSgnLi9FeHBvcnRTdmYvU3BpbmFsRHJpdmVfQXBwX2V4cG9ydF9zdmYuanMnKS5GaWxlRXhwbG9yZXJFeHBvcnRTdmY7XG4gIHNwaW5hbERyaXZlX0Vudi5hZGRfYXBwbGljYXRpb25zKCdGaWxlRXhwbG9yZXInLCBuZXcgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9leHBvcnRfc3ZmKCkpO1xuICAvLyBzcGluYWxEcml2ZV9FbnYuY29udGV4dF9maWxlX2V4cF9hcHBfaWNvbi5TdmYgPSBcImxvY2F0aW9uX2NpdHlcIjtcbiAgc3BpbmFsRHJpdmVfRW52LmNvbnRleHRfZmlsZV9leHBfYXBwX2ljb25bXCJCSU0gUHJvamVjdFwiXSA9IFwibG9jYXRpb25fY2l0eVwiO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9zdmZfdmlld2VyID0gcmVxdWlyZSgnLi9FeHBvcnRTdmYvU3BpbmFsRHJpdmVfQXBwX3N2Zl92aWV3ZXIuanMnKS5GaWxlRXhwbG9yZXJTdmZWaWV3ZXI7XG4gIHNwaW5hbERyaXZlX0Vudi5hZGRfYXBwbGljYXRpb25zKCdGaWxlRXhwbG9yZXInLCBuZXcgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9zdmZfdmlld2VyKCkpO1xuICB2YXIgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9leHBvcnRfc3ZmID0gcmVxdWlyZSgnLi9FeHBvcnRTdmYvU3BpbmFsRHJpdmVfQXBwX2V4cG9ydF9zdmYuanMnKS5GaWxlRXhwbG9yZXJFeHBvcnRTdmY7XG4gIHNwaW5hbERyaXZlX0Vudi5hZGRfYXBwbGljYXRpb25zKCdGaWxlRXhwbG9yZXInLCBuZXcgU3BpbmFsRHJpdmVfQXBwX0ZpbGVFeHBsb3Jlcl9leHBvcnRfc3ZmKCkpO1xufSkoKTsiXX0=
